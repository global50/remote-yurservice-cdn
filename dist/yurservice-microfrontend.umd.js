!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","react-dom"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).YurServiceMicrofrontend={},e.React,e.ReactDOM)}(this,function(e,t,r){"use strict";function n(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e)for(const r in e)if("default"!==r){const n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:()=>e[r]})}return t.default=e,Object.freeze(t)}const o=n(t),s=n(r);var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};function a(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var r=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}),r}var l={exports:{}},c={},u=t,d=Symbol.for("react.element"),h=Symbol.for("react.fragment"),f=Object.prototype.hasOwnProperty,p=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m={key:!0,ref:!0,__self:!0,__source:!0};function g(e,t,r){var n,o={},s=null,i=null;for(n in void 0!==r&&(s=""+r),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(i=t.ref),t)f.call(t,n)&&!m.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===o[n]&&(o[n]=t[n]);return{$$typeof:d,type:e,key:s,ref:i,props:o,_owner:p.current}}c.Fragment=h,c.jsx=g,c.jsxs=g,l.exports=c;var v=l.exports;function y(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(r=y(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}const b=e=>{const t=k(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:e=>{const r=e.split("-");return""===r[0]&&1!==r.length&&r.shift(),w(r,t)||x(e)},getConflictingClassGroupIds:(e,t)=>{const o=r[e]||[];return t&&n[e]?[...o,...n[e]]:o}}},w=(e,t)=>{var r;if(0===e.length)return t.classGroupId;const n=e[0],o=t.nextPart.get(n),s=o?w(e.slice(1),o):void 0;if(s)return s;if(0===t.validators.length)return;const i=e.join("-");return null==(r=t.validators.find(({validator:e})=>e(i)))?void 0:r.classGroupId},_=/^\[(.+)\]$/,x=e=>{if(_.test(e)){const t=_.exec(e)[1],r=null==t?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},k=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return T(Object.entries(e.classGroups),r).forEach(([e,r])=>{E(r,n,e,t)}),n},E=(e,t,r,n)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?t:S(t,e)).classGroupId=r)}if("function"==typeof e)return j(e)?void E(e(n),t,r,n):void t.validators.push({validator:e,classGroupId:r});Object.entries(e).forEach(([e,o])=>{E(o,S(t,e),r,n)})})},S=(e,t)=>{let r=e;return t.split("-").forEach(e=>{r.nextPart.has(e)||r.nextPart.set(e,{nextPart:new Map,validators:[]}),r=r.nextPart.get(e)}),r},j=e=>e.isThemeGetter,T=(e,t)=>t?e.map(([e,r])=>[e,r.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,r])=>[t+e,r])):e)]):e,C=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const o=(o,s)=>{r.set(o,s),t++,t>e&&(t=0,n=r,r=new Map)};return{get(e){let t=r.get(e);return void 0!==t?t:void 0!==(t=n.get(e))?(o(e,t),t):void 0},set(e,t){r.has(e)?r.set(e,t):o(e,t)}}},P=e=>{const{separator:t,experimentalParseClassName:r}=e,n=1===t.length,o=t[0],s=t.length,i=e=>{const r=[];let i,a=0,l=0;for(let d=0;d<e.length;d++){let c=e[d];if(0===a){if(c===o&&(n||e.slice(d,d+s)===t)){r.push(e.slice(l,d)),l=d+s;continue}if("/"===c){i=d;continue}}"["===c?a++:"]"===c&&a--}const c=0===r.length?e:e.substring(l),u=c.startsWith("!");return{modifiers:r,hasImportantModifier:u,baseClassName:u?c.substring(1):c,maybePostfixModifierPosition:i&&i>l?i-l:void 0}};return r?e=>r({className:e,parseClassName:i}):i},O=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(e=>{"["===e[0]?(t.push(...r.sort(),e),r=[]):r.push(e)}),t.push(...r.sort()),t},R=/\s+/;function N(){let e,t,r=0,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=A(e))&&(n&&(n+=" "),n+=t);return n}const A=e=>{if("string"==typeof e)return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=A(e[n]))&&(r&&(r+=" "),r+=t);return r};function I(e,...t){let r,n,o,s=function(a){const l=t.reduce((e,t)=>t(e),e());return r=(e=>({cache:C(e.cacheSize),parseClassName:P(e),...b(e)}))(l),n=r.cache.get,o=r.cache.set,s=i,i(a)};function i(e){const t=n(e);if(t)return t;const s=((e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:o}=t,s=[],i=e.trim().split(R);let a="";for(let l=i.length-1;l>=0;l-=1){const e=i[l],{modifiers:t,hasImportantModifier:c,baseClassName:u,maybePostfixModifierPosition:d}=r(e);let h=Boolean(d),f=n(h?u.substring(0,d):u);if(!f){if(!h){a=e+(a.length>0?" "+a:a);continue}if(f=n(u),!f){a=e+(a.length>0?" "+a:a);continue}h=!1}const p=O(t).join(":"),m=c?p+"!":p,g=m+f;if(s.includes(g))continue;s.push(g);const v=o(f,h);for(let r=0;r<v.length;++r){const e=v[r];s.push(m+e)}a=e+(a.length>0?" "+a:a)}return a})(e,r);return o(e,s),s}return function(){return s(N.apply(null,arguments))}}const $=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},L=/^\[(?:([a-z-]+):)?(.+)\]$/i,D=/^\d+\/\d+$/,M=new Set(["px","full","screen"]),U=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,F=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,B=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,W=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,z=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,q=e=>H(e)||M.has(e)||D.test(e),K=e=>se(e,"length",ie),H=e=>Boolean(e)&&!Number.isNaN(Number(e)),G=e=>se(e,"number",H),V=e=>Boolean(e)&&Number.isInteger(Number(e)),J=e=>e.endsWith("%")&&H(e.slice(0,-1)),Y=e=>L.test(e),X=e=>U.test(e),Z=new Set(["length","size","percentage"]),Q=e=>se(e,Z,ae),ee=e=>se(e,"position",ae),te=new Set(["image","url"]),re=e=>se(e,te,ce),ne=e=>se(e,"",le),oe=()=>!0,se=(e,t,r)=>{const n=L.exec(e);return!!n&&(n[1]?"string"==typeof t?n[1]===t:t.has(n[1]):r(n[2]))},ie=e=>F.test(e)&&!B.test(e),ae=()=>!1,le=e=>W.test(e),ce=e=>z.test(e),ue=I(()=>{const e=$("colors"),t=$("spacing"),r=$("blur"),n=$("brightness"),o=$("borderColor"),s=$("borderRadius"),i=$("borderSpacing"),a=$("borderWidth"),l=$("contrast"),c=$("grayscale"),u=$("hueRotate"),d=$("invert"),h=$("gap"),f=$("gradientColorStops"),p=$("gradientColorStopPositions"),m=$("inset"),g=$("margin"),v=$("opacity"),y=$("padding"),b=$("saturate"),w=$("scale"),_=$("sepia"),x=$("skew"),k=$("space"),E=$("translate"),S=()=>["auto",Y,t],j=()=>[Y,t],T=()=>["",q,K],C=()=>["auto",H,Y],P=()=>["","0",Y],O=()=>[H,Y];return{cacheSize:500,separator:":",theme:{colors:[oe],spacing:[q,K],blur:["none","",X,Y],brightness:O(),borderColor:[e],borderRadius:["none","","full",X,Y],borderSpacing:j(),borderWidth:T(),contrast:O(),grayscale:P(),hueRotate:O(),invert:P(),gap:j(),gradientColorStops:[e],gradientColorStopPositions:[J,K],inset:S(),margin:S(),opacity:O(),padding:j(),saturate:O(),scale:O(),sepia:P(),skew:O(),space:j(),translate:j()},classGroups:{aspect:[{aspect:["auto","square","video",Y]}],container:["container"],columns:[{columns:[X]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",Y]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",V,Y]}],basis:[{basis:S()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Y]}],grow:[{grow:P()}],shrink:[{shrink:P()}],order:[{order:["first","last","none",V,Y]}],"grid-cols":[{"grid-cols":[oe]}],"col-start-end":[{col:["auto",{span:["full",V,Y]},Y]}],"col-start":[{"col-start":C()}],"col-end":[{"col-end":C()}],"grid-rows":[{"grid-rows":[oe]}],"row-start-end":[{row:["auto",{span:[V,Y]},Y]}],"row-start":[{"row-start":C()}],"row-end":[{"row-end":C()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Y]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Y]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Y,t]}],"min-w":[{"min-w":[Y,t,"min","max","fit"]}],"max-w":[{"max-w":[Y,t,"none","full","min","max","fit","prose",{screen:[X]},X]}],h:[{h:[Y,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Y,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Y,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Y,t,"auto","min","max","fit"]}],"font-size":[{text:["base",X,K]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",G]}],"font-family":[{font:[oe]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Y]}],"line-clamp":[{"line-clamp":["none",H,G]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",q,Y]}],"list-image":[{"list-image":["none",Y]}],"list-style-type":[{list:["none","disc","decimal",Y]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",q,K]}],"underline-offset":[{"underline-offset":["auto",q,Y]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Y]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Y]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",ee]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Q]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},re]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[q,Y]}],"outline-w":[{outline:[q,K]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:T()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[q,K]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",X,ne]}],"shadow-color":[{shadow:[oe]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",X,Y]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[b]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Y]}],duration:[{duration:O()}],ease:[{ease:["linear","in","out","in-out",Y]}],delay:[{delay:O()}],animate:[{animate:["none","spin","ping","pulse","bounce",Y]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[V,Y]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[x]}],"skew-y":[{"skew-y":[x]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Y]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Y]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Y]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[q,K,G]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function de(...e){return ue(function(){for(var e,t,r=0,n="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=y(e))&&(n&&(n+=" "),n+=t);return n}(e))}const he=o.forwardRef(({className:e,type:t,...r},n)=>v.jsx("input",{type:t,className:de("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r}));he.displayName="Input";const fe=o.forwardRef(({className:e,...t},r)=>v.jsx("div",{ref:r,className:de("rounded-xl border bg-card text-card-foreground shadow",e),...t}));fe.displayName="Card";const pe=o.forwardRef(({className:e,...t},r)=>v.jsx("div",{ref:r,className:de("flex flex-col space-y-1.5 p-6",e),...t}));pe.displayName="CardHeader";const me=o.forwardRef(({className:e,...t},r)=>v.jsx("h3",{ref:r,className:de("font-semibold leading-none tracking-tight",e),...t}));me.displayName="CardTitle";o.forwardRef(({className:e,...t},r)=>v.jsx("p",{ref:r,className:de("text-sm text-muted-foreground",e),...t})).displayName="CardDescription";const ge=o.forwardRef(({className:e,...t},r)=>v.jsx("div",{ref:r,className:de("p-6 pt-0",e),...t}));ge.displayName="CardContent";function ve(...e){return t=>e.forEach(e=>function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(e,t))}function ye(...e){return o.useCallback(ve(...e),e)}o.forwardRef(({className:e,...t},r)=>v.jsx("div",{ref:r,className:de("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter";var be=o.forwardRef((e,t)=>{const{children:r,...n}=e,s=o.Children.toArray(r),i=s.find(xe);if(i){const e=i.props.children,r=s.map(t=>t===i?o.Children.count(e)>1?o.Children.only(null):o.isValidElement(e)?e.props.children:null:t);return v.jsx(we,{...n,ref:t,children:o.isValidElement(e)?o.cloneElement(e,void 0,r):null})}return v.jsx(we,{...n,ref:t,children:r})});be.displayName="Slot";var we=o.forwardRef((e,t)=>{const{children:r,...n}=e;if(o.isValidElement(r)){const e=function(e){var t,r;let n=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,o=n&&"isReactWarning"in n&&n.isReactWarning;if(o)return e.ref;if(n=null==(r=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:r.get,o=n&&"isReactWarning"in n&&n.isReactWarning,o)return e.props.ref;return e.props.ref||e.ref}(r);return o.cloneElement(r,{...ke(n,r.props),ref:t?ve(t,e):e})}return o.Children.count(r)>1?o.Children.only(null):null});we.displayName="SlotClone";var _e=({children:e})=>v.jsx(v.Fragment,{children:e});function xe(e){return o.isValidElement(e)&&e.type===_e}function ke(e,t){const r={...t};for(const n in t){const o=e[n],s=t[n];/^on[A-Z]/.test(n)?o&&s?r[n]=(...e)=>{s(...e),o(...e)}:o&&(r[n]=o):"style"===n?r[n]={...o,...s}:"className"===n&&(r[n]=[o,s].filter(Boolean).join(" "))}return{...e,...r}}function Ee(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=Ee(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}const Se=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,je=function(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=Ee(e))&&(n&&(n+=" "),n+=t);return n},Te=(e,t)=>r=>{var n;if(null==(null==t?void 0:t.variants))return je(e,null==r?void 0:r.class,null==r?void 0:r.className);const{variants:o,defaultVariants:s}=t,i=Object.keys(o).map(e=>{const t=null==r?void 0:r[e],n=null==s?void 0:s[e];if(null===t)return null;const i=Se(t)||Se(n);return o[e][i]}),a=r&&Object.entries(r).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{}),l=null==t||null===(n=t.compoundVariants)||void 0===n?void 0:n.reduce((e,t)=>{let{class:r,className:n,...o}=t;return Object.entries(o).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...s,...a}[t]):{...s,...a}[t]===r})?[...e,r,n]:e},[]);return je(e,i,l,null==r?void 0:r.class,null==r?void 0:r.className)},Ce=Te("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 break-words",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Pe=o.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...o},s)=>{const i=n?be:"button";return v.jsx(i,{className:de(Ce({variant:t,size:r,className:e})),ref:s,...o})});Pe.displayName="Button";
/**
   * @license lucide-react v0.446.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   */
const Oe=(...e)=>e.filter((e,t,r)=>Boolean(e)&&r.indexOf(e)===t).join(" ");
/**
   * @license lucide-react v0.446.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   */
var Re={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
   * @license lucide-react v0.446.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   */const Ne=t.forwardRef(({color:e="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:s="",children:i,iconNode:a,...l},c)=>t.createElement("svg",{ref:c,...Re,width:r,height:r,stroke:e,strokeWidth:o?24*Number(n)/Number(r):n,className:Oe("lucide",s),...l},[...a.map(([e,r])=>t.createElement(e,r)),...Array.isArray(i)?i:[i]])),Ae=(e,r)=>{const n=t.forwardRef(({className:n,...o},s)=>{return t.createElement(Ne,{ref:s,iconNode:r,className:Oe(`lucide-${i=e,i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,n),...o});var i});return n.displayName=`${e}`,n},Ie=Ae("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),$e=Ae("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Le=Ae("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),De=Ae("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]),Me=Ae("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ue=Ae("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Fe=Ae("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),Be=Ae("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),We=Ae("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),ze=Ae("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),qe=Ae("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Ke=Ae("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),He=Ae("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Ge=Ae("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Ve=Ae("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);
/**
   * @license lucide-react v0.446.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   */function Je(e,t=[]){let r=[];const n=()=>{const t=r.map(e=>o.createContext(e));return function(r){const n=(null==r?void 0:r[e])||t;return o.useMemo(()=>({[`__scope${e}`]:{...r,[e]:n}}),[r,n])}};return n.scopeName=e,[function(t,n){const s=o.createContext(n),i=r.length;r=[...r,n];const a=t=>{var r;const{scope:n,children:a,...l}=t,c=(null==(r=null==n?void 0:n[e])?void 0:r[i])||s,u=o.useMemo(()=>l,Object.values(l));return v.jsx(c.Provider,{value:u,children:a})};return a.displayName=t+"Provider",[a,function(r,a){var l;const c=(null==(l=null==a?void 0:a[e])?void 0:l[i])||s,u=o.useContext(c);if(u)return u;if(void 0!==n)return n;throw new Error(`\`${r}\` must be used within \`${t}\``)}]},Ye(n,...t)]}function Ye(...e){const t=e[0];if(1===e.length)return t;const r=()=>{const r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const n=r.reduce((t,{useScope:r,scopeName:n})=>({...t,...r(e)[`__scope${n}`]}),{});return o.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return r.scopeName=t.scopeName,r}function Xe(e){const t=o.useRef(e);return o.useEffect(()=>{t.current=e}),o.useMemo(()=>(...e)=>{var r;return null==(r=t.current)?void 0:r.call(t,...e)},[])}var Ze=Boolean(null==globalThis?void 0:globalThis.document)?o.useLayoutEffect:()=>{},Qe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{const r=o.forwardRef((e,r)=>{const{asChild:n,...o}=e,s=n?be:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),v.jsx(s,{...o,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});var et="Avatar",[tt,rt]=Je(et),[nt,ot]=tt(et),st=o.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[s,i]=o.useState("idle");return v.jsx(nt,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:v.jsx(Qe.span,{...n,ref:t})})});st.displayName=et;var it="AvatarImage",at=o.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:s=()=>{},...i}=e,a=ot(it,r),l=function(e,t){const[r,n]=o.useState("idle");return Ze(()=>{if(!e)return void n("error");let r=!0;const o=new window.Image,s=e=>()=>{r&&n(e)};return n("loading"),o.onload=s("loaded"),o.onerror=s("error"),o.src=e,t&&(o.referrerPolicy=t),()=>{r=!1}},[e,t]),r}(n,i.referrerPolicy),c=Xe(e=>{s(e),a.onImageLoadingStatusChange(e)});return Ze(()=>{"idle"!==l&&c(l)},[l,c]),"loaded"===l?v.jsx(Qe.img,{...i,ref:t,src:n}):null});at.displayName=it;var lt="AvatarFallback",ct=o.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...s}=e,i=ot(lt,r),[a,l]=o.useState(void 0===n);return o.useEffect(()=>{if(void 0!==n){const e=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(e)}},[n]),a&&"loaded"!==i.imageLoadingStatus?v.jsx(Qe.span,{...s,ref:t}):null});ct.displayName=lt;var ut=st,dt=at,ht=ct;const ft=o.forwardRef(({className:e,...t},r)=>v.jsx(ut,{ref:r,className:de("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));ft.displayName=ut.displayName;const pt=o.forwardRef(({className:e,...t},r)=>v.jsx(dt,{ref:r,className:de("aspect-square h-full w-full",e),...t}));pt.displayName=dt.displayName;const mt=o.forwardRef(({className:e,...t},r)=>v.jsx(ht,{ref:r,className:de("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));mt.displayName=ht.displayName;let gt=0;const vt=new Map,yt=e=>{if(vt.has(e))return;const t=setTimeout(()=>{vt.delete(e),xt({type:"REMOVE_TOAST",toastId:e})},3e3);vt.set(e,t)},bt=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?yt(r):e.toasts.forEach(e=>{yt(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},wt=[];let _t={toasts:[]};function xt(e){_t=bt(_t,e),wt.forEach(e=>{e(_t)})}function kt({...e}){const t=(gt=(gt+1)%Number.MAX_SAFE_INTEGER,gt.toString()),r=()=>xt({type:"DISMISS_TOAST",toastId:t});return xt({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>xt({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function Et({resource:e,isExpanded:t,onToggle:r}){const{toast:n}=function(){const[e,t]=o.useState(_t);return o.useEffect(()=>(wt.push(t),()=>{const e=wt.indexOf(t);e>-1&&wt.splice(e,1)}),[e]),{...e,toast:kt,dismiss:e=>xt({type:"DISMISS_TOAST",toastId:e})}}(),s=e=>{window.open(e,"_blank","noopener,noreferrer,nofollow")},i=[...(a=e.links).filter(e=>"official"===e.type),...a.filter(e=>"service"===e.type),...a.filter(e=>!e.type||"other"===e.type)];var a,l;return v.jsxs(fe,{className:"hover:shadow-md transition-shadow",children:[v.jsx(pe,{className:"pb-3",children:v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsxs(ft,{className:"h-10 w-10 shrink-0",children:[e.imageUrl&&v.jsx(pt,{src:e.imageUrl,alt:e.name}),v.jsx(mt,{className:"bg-primary/10 text-primary text-sm font-semibold",children:(l=e.name,l.split(" ").map(e=>e[0]).slice(0,2).join("").toUpperCase())})]}),v.jsx("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:r,children:v.jsx(me,{className:"text-lg",children:e.name})}),v.jsx(Pe,{variant:"ghost",size:"sm",onClick:r,className:"p-2 shrink-0",children:t?v.jsx(Le,{className:"h-4 w-4"}):v.jsx($e,{className:"h-4 w-4"})})]})}),v.jsxs(ge,{className:"pt-0",children:[v.jsx(Pe,{variant:"default",size:"sm",className:"w-full bg-gradient-to-r from-slate-600 to-slate-700 hover:from-slate-700 hover:to-slate-800 dark:from-slate-700 dark:to-slate-800 dark:hover:from-slate-800 dark:hover:to-slate-900 text-white shadow-sm",onClick:()=>s(e.mainUrl),children:e.mainButtonLabel||"Открыть"}),t&&v.jsxs("div",{className:"space-y-4 pt-4 mt-4 border-t",children:[e.description&&v.jsx("div",{children:v.jsx("p",{className:"text-sm text-muted-foreground",children:e.description})}),i.length>0&&v.jsx("div",{children:v.jsx("div",{className:"space-y-1",children:i.map((e,t)=>v.jsxs(Pe,{variant:"ghost",size:"sm",className:"w-full justify-start text-sm h-auto py-2 px-3",onClick:()=>s(e.url),children:[v.jsx(Fe,{className:"h-3 w-3 mr-2 shrink-0"}),v.jsx("span",{className:"text-left",children:e.label})]},t))})}),(e.websiteUrl||e.servicesUrl)&&v.jsxs("div",{className:"flex gap-2",children:[e.websiteUrl&&v.jsxs(Pe,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>s(e.websiteUrl),children:[v.jsx(We,{className:"h-3 w-3 mr-2"}),"Сайт"]}),e.servicesUrl&&v.jsxs(Pe,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>s(e.servicesUrl),children:[v.jsx(ze,{className:"h-3 w-3 mr-2"}),"Сервисы"]})]}),e.contacts&&v.jsx("div",{children:v.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[e.contacts.phone&&v.jsxs("div",{className:"flex items-start gap-2",children:[v.jsx(He,{className:"h-4 w-4 mt-0.5 shrink-0"}),v.jsx("span",{children:e.contacts.phone})]}),e.contacts.email&&v.jsxs("div",{className:"flex items-start gap-2",children:[v.jsx(qe,{className:"h-4 w-4 mt-0.5 shrink-0"}),v.jsx("span",{children:e.contacts.email})]}),e.contacts.address&&v.jsxs("div",{className:"flex items-start gap-2",children:[v.jsx(Ke,{className:"h-4 w-4 mt-0.5 shrink-0"}),v.jsx("span",{children:e.contacts.address})]}),e.contacts.hours&&v.jsxs("div",{className:"flex items-start gap-2",children:[v.jsx(Ue,{className:"h-4 w-4 mt-0.5 shrink-0"}),v.jsx("span",{children:e.contacts.hours})]})]})}),v.jsx("div",{className:"flex justify-end gap-2 mt-4",children:v.jsx(Pe,{variant:"ghost",size:"sm",onClick:()=>{const t=window.location.origin+window.location.pathname,r=e.slug?`${t}?resource=${e.slug}`:e.websiteUrl||e.mainUrl;navigator.clipboard&&navigator.clipboard.writeText(r).then(()=>{n({title:"Link copied",description:"Resource link has been copied to clipboard"})}).catch(()=>{n({title:"Copy failed",description:"Failed to copy link to clipboard",variant:"destructive"})})},className:"p-2 h-8 w-8",children:v.jsx(Ve,{className:"h-4 w-4"})})})]})]})]})}function St(e,t){if(null==e)return{};var r,n,o={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}var jt=["color"],Tt=t.forwardRef(function(e,r){var n=e.color,o=void 0===n?"currentColor":n,s=St(e,jt);return t.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:r}),t.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:o,fillRule:"evenodd",clipRule:"evenodd"}))}),Ct=["color"],Pt=t.forwardRef(function(e,r){var n=e.color,o=void 0===n?"currentColor":n,s=St(e,Ct);return t.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:r}),t.createElement("path",{d:"M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z",fill:o,fillRule:"evenodd",clipRule:"evenodd"}))}),Ot=.999,Rt=/[\\\/_+.#"@\[\(\{&]/,Nt=/[\\\/_+.#"@\[\(\{&]/g,At=/[\s-]/,It=/[\s-]/g;function $t(e,t,r,n,o,s,i){if(s===t.length)return o===e.length?1:.99;var a=`${o},${s}`;if(void 0!==i[a])return i[a];for(var l,c,u,d,h=n.charAt(s),f=r.indexOf(h,o),p=0;f>=0;)(l=$t(e,t,r,n,f+1,s+1,i))>p&&(f===o?l*=1:Rt.test(e.charAt(f-1))?(l*=.8,(u=e.slice(o,f-1).match(Nt))&&o>0&&(l*=Math.pow(Ot,u.length))):At.test(e.charAt(f-1))?(l*=.9,(d=e.slice(o,f-1).match(It))&&o>0&&(l*=Math.pow(Ot,d.length))):(l*=.17,o>0&&(l*=Math.pow(Ot,f-o))),e.charAt(f)!==t.charAt(s)&&(l*=.9999)),(l<.1&&r.charAt(f-1)===n.charAt(s+1)||n.charAt(s+1)===n.charAt(s)&&r.charAt(f-1)!==n.charAt(s))&&(.1*(c=$t(e,t,r,n,f+1,s+2,i))>l&&(l=.1*c)),l>p&&(p=l),f=r.indexOf(h,f+1);return i[a]=p,p}function Lt(e){return e.toLowerCase().replace(It," ")}function Dt(e,t,r){return $t(e=r&&r.length>0?""+(e+" "+r.join(" ")):e,t,Lt(e),Lt(t),0,0,{})}function Mt(){return Mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mt.apply(null,arguments)}function Ut(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(null==e||e(n),!1===r||!n.defaultPrevented)return null==t?void 0:t(n)}}function Ft(...e){return t=>e.forEach(e=>function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(e,t))}function Bt(...e){return t.useCallback(Ft(...e),e)}function Wt(...e){const r=e[0];if(1===e.length)return r;const n=()=>{const n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const o=n.reduce((t,{useScope:r,scopeName:n})=>({...t,...r(e)[`__scope${n}`]}),{});return t.useMemo(()=>({[`__scope${r.scopeName}`]:o}),[o])}};return n.scopeName=r.scopeName,n}const zt=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?t.useLayoutEffect:()=>{},qt=o["useId".toString()]||(()=>{});let Kt=0;function Ht(e){const[t,r]=o.useState(qt());return zt(()=>{e||r(e=>null!=e?e:String(Kt++))},[e]),e||(t?`radix-${t}`:"")}function Gt(e){const r=t.useRef(e);return t.useEffect(()=>{r.current=e}),t.useMemo(()=>(...e)=>{var t;return null===(t=r.current)||void 0===t?void 0:t.call(r,...e)},[])}function Vt({prop:e,defaultProp:r,onChange:n=()=>{}}){const[o,s]=function({defaultProp:e,onChange:r}){const n=t.useState(e),[o]=n,s=t.useRef(o),i=Gt(r);return t.useEffect(()=>{s.current!==o&&(i(o),s.current=o)},[o,s,i]),n}({defaultProp:r,onChange:n}),i=void 0!==e,a=i?e:o,l=Gt(n);return[a,t.useCallback(t=>{if(i){const r="function"==typeof t?t(e):t;r!==e&&l(r)}else s(t)},[i,e,s,l])]}const Jt=t.forwardRef((e,r)=>{const{children:n,...o}=e,s=t.Children.toArray(n),i=s.find(Zt);if(i){const e=i.props.children,n=s.map(r=>r===i?t.Children.count(e)>1?t.Children.only(null):t.isValidElement(e)?e.props.children:null:r);return t.createElement(Yt,Mt({},o,{ref:r}),t.isValidElement(e)?t.cloneElement(e,void 0,n):null)}return t.createElement(Yt,Mt({},o,{ref:r}),n)});Jt.displayName="Slot";const Yt=t.forwardRef((e,r)=>{const{children:n,...o}=e;return t.isValidElement(n)?t.cloneElement(n,{...Qt(o,n.props),ref:r?Ft(r,n.ref):n.ref}):t.Children.count(n)>1?t.Children.only(null):null});Yt.displayName="SlotClone";const Xt=({children:e})=>t.createElement(t.Fragment,null,e);function Zt(e){return t.isValidElement(e)&&e.type===Xt}function Qt(e,t){const r={...t};for(const n in t){const o=e[n],s=t[n];/^on[A-Z]/.test(n)?o&&s?r[n]=(...e)=>{s(...e),o(...e)}:o&&(r[n]=o):"style"===n?r[n]={...o,...s}:"className"===n&&(r[n]=[o,s].filter(Boolean).join(" "))}return{...e,...r}}const er=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,r)=>{const n=t.forwardRef((e,n)=>{const{asChild:o,...s}=e,i=o?Jt:r;return t.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),t.createElement(i,Mt({},s,{ref:n}))});return n.displayName=`Primitive.${r}`,{...e,[r]:n}},{});const tr="dismissableLayer.update",rr="dismissableLayer.pointerDownOutside",nr="dismissableLayer.focusOutside";let or;const sr=t.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ir=t.forwardRef((e,r)=>{var n;const{disableOutsidePointerEvents:o=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:l,onDismiss:c,...u}=e,d=t.useContext(sr),[h,f]=t.useState(null),p=null!==(n=null==h?void 0:h.ownerDocument)&&void 0!==n?n:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,m]=t.useState({}),g=Bt(r,e=>f(e)),v=Array.from(d.layers),[y]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),b=v.indexOf(y),w=h?v.indexOf(h):-1,_=d.layersWithOutsidePointerEventsDisabled.size>0,x=w>=b,k=function(e,r=(null===globalThis||void 0===globalThis?void 0:globalThis.document)){const n=Gt(e),o=t.useRef(!1),s=t.useRef(()=>{});return t.useEffect(()=>{const e=e=>{if(e.target&&!o.current){let t=function(){lr(rr,n,o,{discrete:!0})};const o={originalEvent:e};"touch"===e.pointerType?(r.removeEventListener("click",s.current),s.current=t,r.addEventListener("click",s.current,{once:!0})):t()}else r.removeEventListener("click",s.current);o.current=!1},t=window.setTimeout(()=>{r.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(t),r.removeEventListener("pointerdown",e),r.removeEventListener("click",s.current)}},[r,n]),{onPointerDownCapture:()=>o.current=!0}}(e=>{const t=e.target,r=[...d.branches].some(e=>e.contains(t));x&&!r&&(null==i||i(e),null==l||l(e),e.defaultPrevented||null==c||c())},p),E=function(e,r=(null===globalThis||void 0===globalThis?void 0:globalThis.document)){const n=Gt(e),o=t.useRef(!1);return t.useEffect(()=>{const e=e=>{if(e.target&&!o.current){lr(nr,n,{originalEvent:e},{discrete:!1})}};return r.addEventListener("focusin",e),()=>r.removeEventListener("focusin",e)},[r,n]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}(e=>{const t=e.target;[...d.branches].some(e=>e.contains(t))||(null==a||a(e),null==l||l(e),e.defaultPrevented||null==c||c())},p);return function(e,r=(null===globalThis||void 0===globalThis?void 0:globalThis.document)){const n=Gt(e);t.useEffect(()=>{const e=e=>{"Escape"===e.key&&n(e)};return r.addEventListener("keydown",e),()=>r.removeEventListener("keydown",e)},[n,r])}(e=>{w===d.layers.size-1&&(null==s||s(e),!e.defaultPrevented&&c&&(e.preventDefault(),c()))},p),t.useEffect(()=>{if(h)return o&&(0===d.layersWithOutsidePointerEventsDisabled.size&&(or=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),ar(),()=>{o&&1===d.layersWithOutsidePointerEventsDisabled.size&&(p.body.style.pointerEvents=or)}},[h,p,o,d]),t.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),ar())},[h,d]),t.useEffect(()=>{const e=()=>m({});return document.addEventListener(tr,e),()=>document.removeEventListener(tr,e)},[]),t.createElement(er.div,Mt({},u,{ref:g,style:{pointerEvents:_?x?"auto":"none":void 0,...e.style},onFocusCapture:Ut(e.onFocusCapture,E.onFocusCapture),onBlurCapture:Ut(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:Ut(e.onPointerDownCapture,k.onPointerDownCapture)}))});function ar(){const e=new CustomEvent(tr);document.dispatchEvent(e)}function lr(e,t,n,{discrete:o}){const s=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),o?function(e,t){e&&r.flushSync(()=>e.dispatchEvent(t))}(s,i):s.dispatchEvent(i)}const cr="focusScope.autoFocusOnMount",ur="focusScope.autoFocusOnUnmount",dr={bubbles:!1,cancelable:!0},hr=t.forwardRef((e,r)=>{const{loop:n=!1,trapped:o=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=e,[l,c]=t.useState(null),u=Gt(s),d=Gt(i),h=t.useRef(null),f=Bt(r,e=>c(e)),p=t.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;t.useEffect(()=>{if(o){let e=function(e){if(p.paused||!l)return;const t=e.target;l.contains(t)?h.current=t:gr(h.current,{select:!0})},t=function(e){if(p.paused||!l)return;const t=e.relatedTarget;null!==t&&(l.contains(t)||gr(h.current,{select:!0}))},r=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&gr(l)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const n=new MutationObserver(r);return l&&n.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),n.disconnect()}}},[o,l,p.paused]),t.useEffect(()=>{if(l){vr.add(p);const t=document.activeElement;if(!l.contains(t)){const r=new CustomEvent(cr,dr);l.addEventListener(cr,u),l.dispatchEvent(r),r.defaultPrevented||(!function(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(gr(n,{select:t}),document.activeElement!==r)return}((e=fr(l),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&gr(l))}return()=>{l.removeEventListener(cr,u),setTimeout(()=>{const e=new CustomEvent(ur,dr);l.addEventListener(ur,d),l.dispatchEvent(e),e.defaultPrevented||gr(null!=t?t:document.body,{select:!0}),l.removeEventListener(ur,d),vr.remove(p)},0)}}var e},[l,u,d,p]);const m=t.useCallback(e=>{if(!n&&!o)return;if(p.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,r=document.activeElement;if(t&&r){const t=e.currentTarget,[o,s]=function(e){const t=fr(e),r=pr(t,e),n=pr(t.reverse(),e);return[r,n]}(t);o&&s?e.shiftKey||r!==s?e.shiftKey&&r===o&&(e.preventDefault(),n&&gr(s,{select:!0})):(e.preventDefault(),n&&gr(o,{select:!0})):r===t&&e.preventDefault()}},[n,o,p.paused]);return t.createElement(er.div,Mt({tabIndex:-1},a,{ref:f,onKeyDown:m}))});function fr(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function pr(e,t){for(const r of e)if(!mr(r,{upTo:t}))return r}function mr(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function gr(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}const vr=function(){let e=[];return{add(t){const r=e[0];t!==r&&(null==r||r.pause()),e=yr(e,t),e.unshift(t)},remove(t){var r;e=yr(e,t),null===(r=e[0])||void 0===r||r.resume()}}}();function yr(e,t){const r=[...e],n=r.indexOf(t);return-1!==n&&r.splice(n,1),r}const br=t.forwardRef((e,n)=>{var o;const{container:s=(null===globalThis||void 0===globalThis||null===(o=globalThis.document)||void 0===o?void 0:o.body),...i}=e;return s?r.createPortal(t.createElement(er.div,Mt({},i,{ref:n})),s):null});const wr=e=>{const{present:n,children:o}=e,s=function(e){const[n,o]=t.useState(),s=t.useRef({}),i=t.useRef(e),a=t.useRef("none"),l=e?"mounted":"unmounted",[c,u]=function(e,r){return t.useReducer((e,t)=>{const n=r[e][t];return null!=n?n:e},e)}(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return t.useEffect(()=>{const e=_r(s.current);a.current="mounted"===c?e:"none"},[c]),zt(()=>{const t=s.current,r=i.current;if(r!==e){const n=a.current,o=_r(t);if(e)u("MOUNT");else if("none"===o||"none"===(null==t?void 0:t.display))u("UNMOUNT");else{u(r&&n!==o?"ANIMATION_OUT":"UNMOUNT")}i.current=e}},[e,u]),zt(()=>{if(n){const e=e=>{const t=_r(s.current).includes(e.animationName);e.target===n&&t&&r.flushSync(()=>u("ANIMATION_END"))},t=e=>{e.target===n&&(a.current=_r(s.current))};return n.addEventListener("animationstart",t),n.addEventListener("animationcancel",e),n.addEventListener("animationend",e),()=>{n.removeEventListener("animationstart",t),n.removeEventListener("animationcancel",e),n.removeEventListener("animationend",e)}}u("ANIMATION_END")},[n,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:t.useCallback(e=>{e&&(s.current=getComputedStyle(e)),o(e)},[])}}(n),i="function"==typeof o?o({present:s.isPresent}):t.Children.only(o),a=Bt(s.ref,i.ref);return"function"==typeof o||s.isPresent?t.cloneElement(i,{ref:a}):null};function _r(e){return(null==e?void 0:e.animationName)||"none"}wr.displayName="Presence";let xr=0;function kr(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var Er=function(){return Er=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Er.apply(this,arguments)};function Sr(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function jr(e,t,r){if(r||2===arguments.length)for(var n,o=0,s=t.length;o<s;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var Tr="right-scroll-bar-position",Cr="width-before-scroll-bar";function Pr(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var Or="undefined"!=typeof window?o.useLayoutEffect:o.useEffect,Rr=new WeakMap;function Nr(e,r){var n,o,s,i=(n=null,o=function(t){return e.forEach(function(e){return Pr(e,t)})},(s=t.useState(function(){return{value:n,callback:o,facade:{get current(){return s.value},set current(e){var t=s.value;t!==e&&(s.value=e,s.callback(e,t))}}}})[0]).callback=o,s.facade);return Or(function(){var t=Rr.get(i);if(t){var r=new Set(t),n=new Set(e),o=i.current;r.forEach(function(e){n.has(e)||Pr(e,null)}),n.forEach(function(e){r.has(e)||Pr(e,o)})}Rr.set(i,e)},[e]),i}function Ar(e){return e}function Ir(e){void 0===e&&(e={});var t=function(e,t){void 0===t&&(t=Ar);var r=[],n=!1;return{read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(e){var o=t(e,n);return r.push(o),function(){r=r.filter(function(e){return e!==o})}},assignSyncMedium:function(e){for(n=!0;r.length;){var t=r;r=[],t.forEach(e)}r={push:function(t){return e(t)},filter:function(){return r}}},assignMedium:function(e){n=!0;var t=[];if(r.length){var o=r;r=[],o.forEach(e),t=r}var s=function(){var r=t;t=[],r.forEach(e)},i=function(){return Promise.resolve().then(s)};i(),r={push:function(e){t.push(e),i()},filter:function(e){return t=t.filter(e),r}}}}}(null);return t.options=Er({async:!0,ssr:!1},e),t}var $r=function(e){var t=e.sideCar,r=Sr(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return o.createElement(n,Er({},r))};function Lr(e,t){return e.useMedium(t),$r}$r.isSideCarExport=!0;var Dr=Ir(),Mr=function(){},Ur=o.forwardRef(function(e,t){var r=o.useRef(null),n=o.useState({onScrollCapture:Mr,onWheelCapture:Mr,onTouchMoveCapture:Mr}),s=n[0],i=n[1],a=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,f=e.sideCar,p=e.noIsolation,m=e.inert,g=e.allowPinchZoom,v=e.as,y=void 0===v?"div":v,b=Sr(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),w=f,_=Nr([r,t]),x=Er(Er({},b),s);return o.createElement(o.Fragment,null,d&&o.createElement(w,{sideCar:Dr,removeScrollBar:u,shards:h,noIsolation:p,inert:m,setCallbacks:i,allowPinchZoom:!!g,lockRef:r}),a?o.cloneElement(o.Children.only(l),Er(Er({},x),{ref:_})):o.createElement(y,Er({},x,{className:c,ref:_}),l))});Ur.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},Ur.classNames={fullWidth:Cr,zeroRight:Tr};function Fr(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=function(){if("undefined"!=typeof __webpack_nonce__)return __webpack_nonce__}();return t&&e.setAttribute("nonce",t),e}var Br=function(){var e=0,t=null;return{add:function(r){var n,o;0==e&&(t=Fr())&&(o=r,(n=t).styleSheet?n.styleSheet.cssText=o:n.appendChild(document.createTextNode(o)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Wr=function(){var e,t=(e=Br(),function(t,r){o.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])});return function(e){var r=e.styles,n=e.dynamic;return t(r,n),null}},zr={left:0,top:0,right:0,gap:0},qr=function(e){return parseInt(e||"",10)||0},Kr=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return zr;var t=function(e){var t=window.getComputedStyle(document.body),r=t["padding"===e?"paddingLeft":"marginLeft"],n=t["padding"===e?"paddingTop":"marginTop"],o=t["padding"===e?"paddingRight":"marginRight"];return[qr(r),qr(n),qr(o)]}(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},Hr=Wr(),Gr="data-scroll-locked",Vr=function(e,t,r,n){var o=e.left,s=e.top,i=e.right,a=e.gap;return void 0===r&&(r="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(n,";\n   padding-right: ").concat(a,"px ").concat(n,";\n  }\n  body[").concat(Gr,"] {\n    overflow: hidden ").concat(n,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(n,";"),"margin"===r&&"\n    padding-left: ".concat(o,"px;\n    padding-top: ").concat(s,"px;\n    padding-right: ").concat(i,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(a,"px ").concat(n,";\n    "),"padding"===r&&"padding-right: ".concat(a,"px ").concat(n,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(Tr," {\n    right: ").concat(a,"px ").concat(n,";\n  }\n  \n  .").concat(Cr," {\n    margin-right: ").concat(a,"px ").concat(n,";\n  }\n  \n  .").concat(Tr," .").concat(Tr," {\n    right: 0 ").concat(n,";\n  }\n  \n  .").concat(Cr," .").concat(Cr," {\n    margin-right: 0 ").concat(n,";\n  }\n  \n  body[").concat(Gr,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(a,"px;\n  }\n")},Jr=function(){var e=parseInt(document.body.getAttribute(Gr)||"0",10);return isFinite(e)?e:0},Yr=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=void 0===n?"margin":n;o.useEffect(function(){return document.body.setAttribute(Gr,(Jr()+1).toString()),function(){var e=Jr()-1;e<=0?document.body.removeAttribute(Gr):document.body.setAttribute(Gr,e.toString())}},[]);var i=o.useMemo(function(){return Kr(s)},[s]);return o.createElement(Hr,{styles:Vr(i,!t,s,r?"":"!important")})},Xr=!1;if("undefined"!=typeof window)try{var Zr=Object.defineProperty({},"passive",{get:function(){return Xr=!0,!0}});window.addEventListener("test",Zr,Zr),window.removeEventListener("test",Zr,Zr)}catch(vh){Xr=!1}var Qr=!!Xr&&{passive:!1},en=function(e,t){var r=window.getComputedStyle(e);return"hidden"!==r[t]&&!(r.overflowY===r.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===r[t])},tn=function(e,t){var r=t;do{if("undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),rn(e,r)){var n=nn(e,r);if(n[1]>n[2])return!0}r=r.parentNode}while(r&&r!==document.body);return!1},rn=function(e,t){return"v"===e?function(e){return en(e,"overflowY")}(t):function(e){return en(e,"overflowX")}(t)},nn=function(e,t){return"v"===e?[(r=t).scrollTop,r.scrollHeight,r.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var r},on=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},sn=function(e){return[e.deltaX,e.deltaY]},an=function(e){return e&&"current"in e?e.current:e},ln=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},cn=0,un=[];const dn=Lr(Dr,function(e){var t=o.useRef([]),r=o.useRef([0,0]),n=o.useRef(),s=o.useState(cn++)[0],i=o.useState(function(){return Wr()})[0],a=o.useRef(e);o.useEffect(function(){a.current=e},[e]),o.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var t=jr([e.lockRef.current],(e.shards||[]).map(an),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=o.useCallback(function(e,t){if("touches"in e&&2===e.touches.length)return!a.current.allowPinchZoom;var o,s=on(e),i=r.current,l="deltaX"in e?e.deltaX:i[0]-s[0],c="deltaY"in e?e.deltaY:i[1]-s[1],u=e.target,d=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===d&&"range"===u.type)return!1;var h=tn(d,u);if(!h)return!0;if(h?o=d:(o="v"===d?"h":"v",h=tn(d,u)),!h)return!1;if(!n.current&&"changedTouches"in e&&(l||c)&&(n.current=o),!o)return!0;var f=n.current||o;return function(e,t,r,n,o){var s=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),i=s*n,a=r.target,l=t.contains(a),c=!1,u=i>0,d=0,h=0;do{var f=nn(e,a),p=f[0],m=f[1]-f[2]-s*p;(p||m)&&rn(e,a)&&(d+=m,h+=p),a=a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(!u||0!==d&&o)&&(u||0!==h&&o)||(c=!0),c}(f,t,e,"h"===f?l:c,!0)},[]),c=o.useCallback(function(e){var r=e;if(un.length&&un[un.length-1]===i){var n="deltaY"in r?sn(r):on(r),o=t.current.filter(function(e){return e.name===r.type&&e.target===r.target&&(t=e.delta,o=n,t[0]===o[0]&&t[1]===o[1]);var t,o})[0];if(o&&o.should)r.cancelable&&r.preventDefault();else if(!o){var s=(a.current.shards||[]).map(an).filter(Boolean).filter(function(e){return e.contains(r.target)});(s.length>0?l(r,s[0]):!a.current.noIsolation)&&r.cancelable&&r.preventDefault()}}},[]),u=o.useCallback(function(e,r,n,o){var s={name:e,delta:r,target:n,should:o};t.current.push(s),setTimeout(function(){t.current=t.current.filter(function(e){return e!==s})},1)},[]),d=o.useCallback(function(e){r.current=on(e),n.current=void 0},[]),h=o.useCallback(function(t){u(t.type,sn(t),t.target,l(t,e.lockRef.current))},[]),f=o.useCallback(function(t){u(t.type,on(t),t.target,l(t,e.lockRef.current))},[]);o.useEffect(function(){return un.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,Qr),document.addEventListener("touchmove",c,Qr),document.addEventListener("touchstart",d,Qr),function(){un=un.filter(function(e){return e!==i}),document.removeEventListener("wheel",c,Qr),document.removeEventListener("touchmove",c,Qr),document.removeEventListener("touchstart",d,Qr)}},[]);var p=e.removeScrollBar,m=e.inert;return o.createElement(o.Fragment,null,m?o.createElement(i,{styles:ln(s)}):null,p?o.createElement(Yr,{gapMode:"margin"}):null)});var hn=o.forwardRef(function(e,t){return o.createElement(Ur,Er({},e,{ref:t,sideCar:dn}))});hn.classNames=Ur.classNames;var fn=new WeakMap,pn=new WeakMap,mn={},gn=0,vn=function(e){return e&&(e.host||vn(e.parentNode))},yn=function(e,t,r,n){var o=function(e,t){return t.map(function(t){if(e.contains(t))return t;var r=vn(t);return r&&e.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)}).filter(function(e){return Boolean(e)})}(t,Array.isArray(e)?e:[e]);mn[r]||(mn[r]=new WeakMap);var s=mn[r],i=[],a=new Set,l=new Set(o),c=function(e){e&&!a.has(e)&&(a.add(e),c(e.parentNode))};o.forEach(c);var u=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(a.has(e))u(e);else try{var t=e.getAttribute(n),o=null!==t&&"false"!==t,l=(fn.get(e)||0)+1,c=(s.get(e)||0)+1;fn.set(e,l),s.set(e,c),i.push(e),1===l&&o&&pn.set(e,!0),1===c&&e.setAttribute(r,"true"),o||e.setAttribute(n,"true")}catch(d){console.error("aria-hidden: cannot operate on ",e,d)}})};return u(t),a.clear(),gn++,function(){i.forEach(function(e){var t=fn.get(e)-1,o=s.get(e)-1;fn.set(e,t),s.set(e,o),t||(pn.has(e)||e.removeAttribute(n),pn.delete(e)),o||e.removeAttribute(r)}),--gn||(fn=new WeakMap,fn=new WeakMap,pn=new WeakMap,mn={})}},bn=function(e,t,r){void 0===r&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),o=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e);return o?(n.push.apply(n,Array.from(o.querySelectorAll("[aria-live]"))),yn(n,o,r,"aria-hidden")):function(){return null}};const wn="Dialog",[_n,xn]=function(e,r=[]){let n=[];const o=()=>{const r=n.map(e=>t.createContext(e));return function(n){const o=(null==n?void 0:n[e])||r;return t.useMemo(()=>({[`__scope${e}`]:{...n,[e]:o}}),[n,o])}};return o.scopeName=e,[function(r,o){const s=t.createContext(o),i=n.length;function a(r){const{scope:n,children:o,...a}=r,l=(null==n?void 0:n[e][i])||s,c=t.useMemo(()=>a,Object.values(a));return t.createElement(l.Provider,{value:c},o)}return n=[...n,o],a.displayName=r+"Provider",[a,function(n,a){const l=(null==a?void 0:a[e][i])||s,c=t.useContext(l);if(c)return c;if(void 0!==o)return o;throw new Error(`\`${n}\` must be used within \`${r}\``)}]},Wt(o,...r)]}(wn),[kn,En]=_n(wn),Sn="DialogPortal",[jn,Tn]=_n(Sn,{forceMount:void 0}),Cn="DialogOverlay",Pn=t.forwardRef((e,r)=>{const n=Tn(Cn,e.__scopeDialog),{forceMount:o=n.forceMount,...s}=e,i=En(Cn,e.__scopeDialog);return i.modal?t.createElement(wr,{present:o||i.open},t.createElement(On,Mt({},s,{ref:r}))):null}),On=t.forwardRef((e,r)=>{const{__scopeDialog:n,...o}=e,s=En(Cn,n);return t.createElement(hn,{as:Jt,allowPinchZoom:!0,shards:[s.contentRef]},t.createElement(er.div,Mt({"data-state":Ln(s.open)},o,{ref:r,style:{pointerEvents:"auto",...o.style}})))}),Rn="DialogContent",Nn=t.forwardRef((e,r)=>{const n=Tn(Rn,e.__scopeDialog),{forceMount:o=n.forceMount,...s}=e,i=En(Rn,e.__scopeDialog);return t.createElement(wr,{present:o||i.open},i.modal?t.createElement(An,Mt({},s,{ref:r})):t.createElement(In,Mt({},s,{ref:r})))}),An=t.forwardRef((e,r)=>{const n=En(Rn,e.__scopeDialog),o=t.useRef(null),s=Bt(r,n.contentRef,o);return t.useEffect(()=>{const e=o.current;if(e)return bn(e)},[]),t.createElement($n,Mt({},e,{ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ut(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null===(t=n.triggerRef.current)||void 0===t||t.focus()}),onPointerDownOutside:Ut(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:Ut(e.onFocusOutside,e=>e.preventDefault())}))}),In=t.forwardRef((e,r)=>{const n=En(Rn,e.__scopeDialog),o=t.useRef(!1),s=t.useRef(!1);return t.createElement($n,Mt({},e,{ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var r,i;(null===(r=e.onCloseAutoFocus)||void 0===r||r.call(e,t),t.defaultPrevented)||(o.current||null===(i=n.triggerRef.current)||void 0===i||i.focus(),t.preventDefault());o.current=!1,s.current=!1},onInteractOutside:t=>{var r,i;null===(r=e.onInteractOutside)||void 0===r||r.call(e,t),t.defaultPrevented||(o.current=!0,"pointerdown"===t.detail.originalEvent.type&&(s.current=!0));const a=t.target;(null===(i=n.triggerRef.current)||void 0===i?void 0:i.contains(a))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&s.current&&t.preventDefault()}}))}),$n=t.forwardRef((e,r)=>{const{__scopeDialog:n,trapFocus:o,onOpenAutoFocus:s,onCloseAutoFocus:i,...a}=e,l=En(Rn,n),c=Bt(r,t.useRef(null));return t.useEffect(()=>{var e,t;const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(e=r[0])&&void 0!==e?e:kr()),document.body.insertAdjacentElement("beforeend",null!==(t=r[1])&&void 0!==t?t:kr()),xr++,()=>{1===xr&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),xr--}},[]),t.createElement(t.Fragment,null,t.createElement(hr,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:s,onUnmountAutoFocus:i},t.createElement(ir,Mt({role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Ln(l.open)},a,{ref:c,onDismiss:()=>l.onOpenChange(!1)}))),!1)});function Ln(e){return e?"open":"closed"}const Dn=e=>{const{__scopeDialog:r,children:n,open:o,defaultOpen:s,onOpenChange:i,modal:a=!0}=e,l=t.useRef(null),c=t.useRef(null),[u=!1,d]=Vt({prop:o,defaultProp:s,onChange:i});return t.createElement(kn,{scope:r,triggerRef:l,contentRef:c,contentId:Ht(),titleId:Ht(),descriptionId:Ht(),open:u,onOpenChange:d,onOpenToggle:t.useCallback(()=>d(e=>!e),[d]),modal:a},n)},Mn=e=>{const{__scopeDialog:r,forceMount:n,children:o,container:s}=e,i=En(Sn,r);return t.createElement(jn,{scope:r,forceMount:n},t.Children.map(o,e=>t.createElement(wr,{present:n||i.open},t.createElement(br,{asChild:!0,container:s},e))))},Un=Pn,Fn=Nn;var Bn='[cmdk-group=""]',Wn='[cmdk-group-items=""]',zn='[cmdk-item=""]',qn=`${zn}:not([aria-disabled="true"])`,Kn="cmdk-item-select",Hn="data-value",Gn=(e,t,r)=>Dt(e,t,r),Vn=o.createContext(void 0),Jn=()=>o.useContext(Vn),Yn=o.createContext(void 0),Xn=()=>o.useContext(Yn),Zn=o.createContext(void 0),Qn=o.forwardRef((e,t)=>{let r=po(()=>{var t,r;return{search:"",value:null!=(r=null!=(t=e.value)?t:e.defaultValue)?r:"",filtered:{count:0,items:new Map,groups:new Set}}}),n=po(()=>new Set),s=po(()=>new Map),i=po(()=>new Map),a=po(()=>new Set),l=ho(e),{label:c,children:u,value:d,onValueChange:h,filter:f,shouldFilter:p,loop:m,disablePointerSelection:g=!1,vimBindings:v=!0,...y}=e,b=o.useId(),w=o.useId(),_=o.useId(),x=o.useRef(null),k=yo();fo(()=>{if(void 0!==d){let e=d.trim();r.current.value=e,E.emit()}},[d]),fo(()=>{k(6,O)},[]);let E=o.useMemo(()=>({subscribe:e=>(a.current.add(e),()=>a.current.delete(e)),snapshot:()=>r.current,setState:(e,t,n)=>{var o,s,i;if(!Object.is(r.current[e],t)){if(r.current[e]=t,"search"===e)P(),T(),k(1,C);else if("value"===e&&(n||k(5,O),void 0!==(null==(o=l.current)?void 0:o.value))){let e=null!=t?t:"";return void(null==(i=(s=l.current).onValueChange)||i.call(s,e))}E.emit()}},emit:()=>{a.current.forEach(e=>e())}}),[]),S=o.useMemo(()=>({value:(e,t,n)=>{var o;t!==(null==(o=i.current.get(e))?void 0:o.value)&&(i.current.set(e,{value:t,keywords:n}),r.current.filtered.items.set(e,j(t,n)),k(2,()=>{T(),E.emit()}))},item:(e,t)=>(n.current.add(e),t&&(s.current.has(t)?s.current.get(t).add(e):s.current.set(t,new Set([e]))),k(3,()=>{P(),T(),r.current.value||C(),E.emit()}),()=>{i.current.delete(e),n.current.delete(e),r.current.filtered.items.delete(e);let t=R();k(4,()=>{P(),(null==t?void 0:t.getAttribute("id"))===e&&C(),E.emit()})}),group:e=>(s.current.has(e)||s.current.set(e,new Set),()=>{i.current.delete(e),s.current.delete(e)}),filter:()=>l.current.shouldFilter,label:c||e["aria-label"],disablePointerSelection:g,listId:b,inputId:_,labelId:w,listInnerRef:x}),[]);function j(e,t){var n,o;let s=null!=(o=null==(n=l.current)?void 0:n.filter)?o:Gn;return e?s(e,r.current.search,t):0}function T(){if(!r.current.search||!1===l.current.shouldFilter)return;let e=r.current.filtered.items,t=[];r.current.filtered.groups.forEach(r=>{let n=s.current.get(r),o=0;n.forEach(t=>{let r=e.get(t);o=Math.max(r,o)}),t.push([r,o])});let n=x.current;N().sort((t,r)=>{var n,o;let s=t.getAttribute("id"),i=r.getAttribute("id");return(null!=(n=e.get(i))?n:0)-(null!=(o=e.get(s))?o:0)}).forEach(e=>{let t=e.closest(Wn);t?t.appendChild(e.parentElement===t?e:e.closest(`${Wn} > *`)):n.appendChild(e.parentElement===n?e:e.closest(`${Wn} > *`))}),t.sort((e,t)=>t[1]-e[1]).forEach(e=>{let t=x.current.querySelector(`${Bn}[${Hn}="${encodeURIComponent(e[0])}"]`);null==t||t.parentElement.appendChild(t)})}function C(){let e=N().find(e=>"true"!==e.getAttribute("aria-disabled")),t=null==e?void 0:e.getAttribute(Hn);E.setState("value",t||void 0)}function P(){var e,t,o,a;if(!r.current.search||!1===l.current.shouldFilter)return void(r.current.filtered.count=n.current.size);r.current.filtered.groups=new Set;let c=0;for(let s of n.current){let n=j(null!=(t=null==(e=i.current.get(s))?void 0:e.value)?t:"",null!=(a=null==(o=i.current.get(s))?void 0:o.keywords)?a:[]);r.current.filtered.items.set(s,n),n>0&&c++}for(let[n,i]of s.current)for(let e of i)if(r.current.filtered.items.get(e)>0){r.current.filtered.groups.add(n);break}r.current.filtered.count=c}function O(){var e,t,r;let n=R();n&&((null==(e=n.parentElement)?void 0:e.firstChild)===n&&(null==(r=null==(t=n.closest(Bn))?void 0:t.querySelector('[cmdk-group-heading=""]'))||r.scrollIntoView({block:"nearest"})),n.scrollIntoView({block:"nearest"}))}function R(){var e;return null==(e=x.current)?void 0:e.querySelector(`${zn}[aria-selected="true"]`)}function N(){var e;return Array.from(null==(e=x.current)?void 0:e.querySelectorAll(qn))}function A(e){let t=N()[e];t&&E.setState("value",t.getAttribute(Hn))}function I(e){var t;let r=R(),n=N(),o=n.findIndex(e=>e===r),s=n[o+e];null!=(t=l.current)&&t.loop&&(s=o+e<0?n[n.length-1]:o+e===n.length?n[0]:n[o+e]),s&&E.setState("value",s.getAttribute(Hn))}function $(e){let t,r=R(),n=null==r?void 0:r.closest(Bn);for(;n&&!t;)n=e>0?co(n,Bn):uo(n,Bn),t=null==n?void 0:n.querySelector(qn);t?E.setState("value",t.getAttribute(Hn)):I(e)}let L=()=>A(N().length-1),D=e=>{e.preventDefault(),e.metaKey?L():e.altKey?$(1):I(1)},M=e=>{e.preventDefault(),e.metaKey?A(0):e.altKey?$(-1):I(-1)};return o.createElement(er.div,{ref:t,tabIndex:-1,...y,"cmdk-root":"",onKeyDown:e=>{var t;if(null==(t=y.onKeyDown)||t.call(y,e),!e.defaultPrevented)switch(e.key){case"n":case"j":v&&e.ctrlKey&&D(e);break;case"ArrowDown":D(e);break;case"p":case"k":v&&e.ctrlKey&&M(e);break;case"ArrowUp":M(e);break;case"Home":e.preventDefault(),A(0);break;case"End":e.preventDefault(),L();break;case"Enter":if(!e.nativeEvent.isComposing&&229!==e.keyCode){e.preventDefault();let t=R();if(t){let e=new Event(Kn);t.dispatchEvent(e)}}}}},o.createElement("label",{"cmdk-label":"",htmlFor:S.inputId,id:S.labelId,style:wo},c),bo(e,e=>o.createElement(Yn.Provider,{value:E},o.createElement(Vn.Provider,{value:S},e))))}),eo=o.forwardRef((e,t)=>{var r,n;let s=o.useId(),i=o.useRef(null),a=o.useContext(Zn),l=Jn(),c=ho(e),u=null!=(n=null==(r=c.current)?void 0:r.forceMount)?n:null==a?void 0:a.forceMount;fo(()=>{if(!u)return l.item(s,null==a?void 0:a.id)},[u]);let d=vo(s,i,[e.value,e.children,i],e.keywords),h=Xn(),f=go(e=>e.value&&e.value===d.current),p=go(e=>!(!u&&!1!==l.filter())||(!e.search||e.filtered.items.get(s)>0));function m(){var e,t;g(),null==(t=(e=c.current).onSelect)||t.call(e,d.current)}function g(){h.setState("value",d.current,!0)}if(o.useEffect(()=>{let t=i.current;if(t&&!e.disabled)return t.addEventListener(Kn,m),()=>t.removeEventListener(Kn,m)},[p,e.onSelect,e.disabled]),!p)return null;let{disabled:v,value:y,onSelect:b,forceMount:w,keywords:_,...x}=e;return o.createElement(er.div,{ref:mo([i,t]),...x,id:s,"cmdk-item":"",role:"option","aria-disabled":!!v,"aria-selected":!!f,"data-disabled":!!v,"data-selected":!!f,onPointerMove:v||l.disablePointerSelection?void 0:g,onClick:v?void 0:m},e.children)}),to=o.forwardRef((e,t)=>{let{heading:r,children:n,forceMount:s,...i}=e,a=o.useId(),l=o.useRef(null),c=o.useRef(null),u=o.useId(),d=Jn(),h=go(e=>!(!s&&!1!==d.filter())||(!e.search||e.filtered.groups.has(a)));fo(()=>d.group(a),[]),vo(a,l,[e.value,e.heading,c]);let f=o.useMemo(()=>({id:a,forceMount:s}),[s]);return o.createElement(er.div,{ref:mo([l,t]),...i,"cmdk-group":"",role:"presentation",hidden:!h||void 0},r&&o.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:u},r),bo(e,e=>o.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?u:void 0},o.createElement(Zn.Provider,{value:f},e))))}),ro=o.forwardRef((e,t)=>{let{alwaysRender:r,...n}=e,s=o.useRef(null),i=go(e=>!e.search);return r||i?o.createElement(er.div,{ref:mo([s,t]),...n,"cmdk-separator":"",role:"separator"}):null}),no=o.forwardRef((e,t)=>{let{onValueChange:r,...n}=e,s=null!=e.value,i=Xn(),a=go(e=>e.search),l=go(e=>e.value),c=Jn(),u=o.useMemo(()=>{var e;let t=null==(e=c.listInnerRef.current)?void 0:e.querySelector(`${zn}[${Hn}="${encodeURIComponent(l)}"]`);return null==t?void 0:t.getAttribute("id")},[]);return o.useEffect(()=>{null!=e.value&&i.setState("search",e.value)},[e.value]),o.createElement(er.input,{ref:t,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":u,id:c.inputId,type:"text",value:s?e.value:a,onChange:e=>{s||i.setState("search",e.target.value),null==r||r(e.target.value)}})}),oo=o.forwardRef((e,t)=>{let{children:r,label:n="Suggestions",...s}=e,i=o.useRef(null),a=o.useRef(null),l=Jn();return o.useEffect(()=>{if(a.current&&i.current){let e,t=a.current,r=i.current,n=new ResizeObserver(()=>{e=requestAnimationFrame(()=>{let e=t.offsetHeight;r.style.setProperty("--cmdk-list-height",e.toFixed(1)+"px")})});return n.observe(t),()=>{cancelAnimationFrame(e),n.unobserve(t)}}},[]),o.createElement(er.div,{ref:mo([i,t]),...s,"cmdk-list":"",role:"listbox","aria-label":n,id:l.listId},bo(e,e=>o.createElement("div",{ref:mo([a,l.listInnerRef]),"cmdk-list-sizer":""},e)))}),so=o.forwardRef((e,t)=>{let{open:r,onOpenChange:n,overlayClassName:s,contentClassName:i,container:a,...l}=e;return o.createElement(Dn,{open:r,onOpenChange:n},o.createElement(Mn,{container:a},o.createElement(Un,{"cmdk-overlay":"",className:s}),o.createElement(Fn,{"aria-label":e.label,"cmdk-dialog":"",className:i},o.createElement(Qn,{ref:t,...l}))))}),io=o.forwardRef((e,t)=>go(e=>0===e.filtered.count)?o.createElement(er.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),ao=o.forwardRef((e,t)=>{let{progress:r,children:n,label:s="Loading...",...i}=e;return o.createElement(er.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":s},bo(e,e=>o.createElement("div",{"aria-hidden":!0},e)))}),lo=Object.assign(Qn,{List:oo,Item:eo,Input:no,Group:to,Separator:ro,Dialog:so,Empty:io,Loading:ao});function co(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function uo(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function ho(e){let t=o.useRef(e);return fo(()=>{t.current=e}),t}var fo="undefined"==typeof window?o.useEffect:o.useLayoutEffect;function po(e){let t=o.useRef();return void 0===t.current&&(t.current=e()),t}function mo(e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}function go(e){let t=Xn(),r=()=>e(t.snapshot());return o.useSyncExternalStore(t.subscribe,r,r)}function vo(e,t,r,n=[]){let s=o.useRef(),i=Jn();return fo(()=>{var o;let a=(()=>{var e;for(let t of r){if("string"==typeof t)return t.trim();if("object"==typeof t&&"current"in t)return t.current?null==(e=t.current.textContent)?void 0:e.trim():s.current}})(),l=n.map(e=>e.trim());i.value(e,a,l),null==(o=t.current)||o.setAttribute(Hn,a),s.current=a}),s}var yo=()=>{let[e,t]=o.useState(),r=po(()=>new Map);return fo(()=>{r.current.forEach(e=>e()),r.current=new Map},[e]),(e,n)=>{r.current.set(e,n),t({})}};function bo({asChild:e,children:t},r){return e&&o.isValidElement(t)?o.cloneElement(function(e){let t=e.type;return"function"==typeof t?t(e.props):"render"in t?t.render(e.props):e}(t),{ref:t.ref},r(t.props.children)):r(t)}var wo={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function _o(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(null==e||e(n),!1===r||!n.defaultPrevented)return null==t?void 0:t(n)}}var xo=o["useId".toString()]||(()=>{}),ko=0;function Eo(e){const[t,r]=o.useState(xo());return Ze(()=>{e||r(e=>e??String(ko++))},[e]),e||(t?`radix-${t}`:"")}function So({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,s]=function({defaultProp:e,onChange:t}){const r=o.useState(e),[n]=r,s=o.useRef(n),i=Xe(t);return o.useEffect(()=>{s.current!==n&&(i(n),s.current=n)},[n,s,i]),r}({defaultProp:t,onChange:r}),i=void 0!==e,a=i?e:n,l=Xe(r);return[a,o.useCallback(t=>{if(i){const r="function"==typeof t?t(e):t;r!==e&&l(r)}else s(t)},[i,e,s,l])]}var jo,To="dismissableLayer.update",Co="dismissableLayer.pointerDownOutside",Po="dismissableLayer.focusOutside",Oo=o.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ro=o.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=e,u=o.useContext(Oo),[d,h]=o.useState(null),f=(null==d?void 0:d.ownerDocument)??(null==globalThis?void 0:globalThis.document),[,p]=o.useState({}),m=ye(t,e=>h(e)),g=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=g.indexOf(y),w=d?g.indexOf(d):-1,_=u.layersWithOutsidePointerEventsDisabled.size>0,x=w>=b,k=function(e,t=(null==globalThis?void 0:globalThis.document)){const r=Xe(e),n=o.useRef(!1),s=o.useRef(()=>{});return o.useEffect(()=>{const e=e=>{if(e.target&&!n.current){let n=function(){Ao(Co,r,o,{discrete:!0})};const o={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",s.current),s.current=n,t.addEventListener("click",s.current,{once:!0})):n()}else t.removeEventListener("click",s.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",e),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}(e=>{const t=e.target,r=[...u.branches].some(e=>e.contains(t));x&&!r&&(null==s||s(e),null==a||a(e),e.defaultPrevented||null==l||l())},f),E=function(e,t=(null==globalThis?void 0:globalThis.document)){const r=Xe(e),n=o.useRef(!1);return o.useEffect(()=>{const e=e=>{if(e.target&&!n.current){Ao(Po,r,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}(e=>{const t=e.target;[...u.branches].some(e=>e.contains(t))||(null==i||i(e),null==a||a(e),e.defaultPrevented||null==l||l())},f);return function(e,t=(null==globalThis?void 0:globalThis.document)){const r=Xe(e);o.useEffect(()=>{const e=e=>{"Escape"===e.key&&r(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[r,t])}(e=>{w===u.layers.size-1&&(null==n||n(e),!e.defaultPrevented&&l&&(e.preventDefault(),l()))},f),o.useEffect(()=>{if(d)return r&&(0===u.layersWithOutsidePointerEventsDisabled.size&&(jo=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),No(),()=>{r&&1===u.layersWithOutsidePointerEventsDisabled.size&&(f.body.style.pointerEvents=jo)}},[d,f,r,u]),o.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),No())},[d,u]),o.useEffect(()=>{const e=()=>p({});return document.addEventListener(To,e),()=>document.removeEventListener(To,e)},[]),v.jsx(Qe.div,{...c,ref:m,style:{pointerEvents:_?x?"auto":"none":void 0,...e.style},onFocusCapture:_o(e.onFocusCapture,E.onFocusCapture),onBlurCapture:_o(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:_o(e.onPointerDownCapture,k.onPointerDownCapture)})});Ro.displayName="DismissableLayer";function No(){const e=new CustomEvent(To);document.dispatchEvent(e)}function Ao(e,t,r,{discrete:n}){const o=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&o.addEventListener(e,t,{once:!0}),n?function(e,t){e&&s.flushSync(()=>e.dispatchEvent(t))}(o,i):o.dispatchEvent(i)}o.forwardRef((e,t)=>{const r=o.useContext(Oo),n=o.useRef(null),s=ye(t,n);return o.useEffect(()=>{const e=n.current;if(e)return r.branches.add(e),()=>{r.branches.delete(e)}},[r.branches]),v.jsx(Qe.div,{...e,ref:s})}).displayName="DismissableLayerBranch";var Io="focusScope.autoFocusOnMount",$o="focusScope.autoFocusOnUnmount",Lo={bubbles:!1,cancelable:!0},Do=o.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=e,[l,c]=o.useState(null),u=Xe(s),d=Xe(i),h=o.useRef(null),f=ye(t,e=>c(e)),p=o.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;o.useEffect(()=>{if(n){let e=function(e){if(p.paused||!l)return;const t=e.target;l.contains(t)?h.current=t:Bo(h.current,{select:!0})},t=function(e){if(p.paused||!l)return;const t=e.relatedTarget;null!==t&&(l.contains(t)||Bo(h.current,{select:!0}))},r=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&Bo(l)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const n=new MutationObserver(r);return l&&n.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),n.disconnect()}}},[n,l,p.paused]),o.useEffect(()=>{if(l){Wo.add(p);const t=document.activeElement;if(!l.contains(t)){const r=new CustomEvent(Io,Lo);l.addEventListener(Io,u),l.dispatchEvent(r),r.defaultPrevented||(!function(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Bo(n,{select:t}),document.activeElement!==r)return}((e=Mo(l),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&Bo(l))}return()=>{l.removeEventListener(Io,u),setTimeout(()=>{const e=new CustomEvent($o,Lo);l.addEventListener($o,d),l.dispatchEvent(e),e.defaultPrevented||Bo(t??document.body,{select:!0}),l.removeEventListener($o,d),Wo.remove(p)},0)}}var e},[l,u,d,p]);const m=o.useCallback(e=>{if(!r&&!n)return;if(p.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,o=document.activeElement;if(t&&o){const t=e.currentTarget,[n,s]=function(e){const t=Mo(e),r=Uo(t,e),n=Uo(t.reverse(),e);return[r,n]}(t);n&&s?e.shiftKey||o!==s?e.shiftKey&&o===n&&(e.preventDefault(),r&&Bo(s,{select:!0})):(e.preventDefault(),r&&Bo(n,{select:!0})):o===t&&e.preventDefault()}},[r,n,p.paused]);return v.jsx(Qe.div,{tabIndex:-1,...a,ref:f,onKeyDown:m})});function Mo(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Uo(e,t){for(const r of e)if(!Fo(r,{upTo:t}))return r}function Fo(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function Bo(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}Do.displayName="FocusScope";var Wo=function(){let e=[];return{add(t){const r=e[0];t!==r&&(null==r||r.pause()),e=zo(e,t),e.unshift(t)},remove(t){var r;e=zo(e,t),null==(r=e[0])||r.resume()}}}();function zo(e,t){const r=[...e],n=r.indexOf(t);return-1!==n&&r.splice(n,1),r}var qo=o.forwardRef((e,t)=>{var n;const{container:s,...i}=e,[a,l]=o.useState(!1);Ze(()=>l(!0),[]);const c=s||a&&(null==(n=null==globalThis?void 0:globalThis.document)?void 0:n.body);return c?r.createPortal(v.jsx(Qe.div,{...i,ref:t}),c):null});qo.displayName="Portal";var Ko=e=>{const{present:t,children:r}=e,n=function(e){const[t,r]=o.useState(),n=o.useRef({}),s=o.useRef(e),i=o.useRef("none"),a=e?"mounted":"unmounted",[l,c]=function(e,t){return o.useReducer((e,r)=>t[e][r]??e,e)}(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return o.useEffect(()=>{const e=Ho(n.current);i.current="mounted"===l?e:"none"},[l]),Ze(()=>{const t=n.current,r=s.current;if(r!==e){const n=i.current,o=Ho(t);if(e)c("MOUNT");else if("none"===o||"none"===(null==t?void 0:t.display))c("UNMOUNT");else{c(r&&n!==o?"ANIMATION_OUT":"UNMOUNT")}s.current=e}},[e,c]),Ze(()=>{if(t){let e;const r=t.ownerDocument.defaultView??window,o=o=>{const i=Ho(n.current).includes(o.animationName);if(o.target===t&&i&&(c("ANIMATION_END"),!s.current)){const n=t.style.animationFillMode;t.style.animationFillMode="forwards",e=r.setTimeout(()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=n)})}},a=e=>{e.target===t&&(i.current=Ho(n.current))};return t.addEventListener("animationstart",a),t.addEventListener("animationcancel",o),t.addEventListener("animationend",o),()=>{r.clearTimeout(e),t.removeEventListener("animationstart",a),t.removeEventListener("animationcancel",o),t.removeEventListener("animationend",o)}}c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:o.useCallback(e=>{e&&(n.current=getComputedStyle(e)),r(e)},[])}}(t),s="function"==typeof r?r({present:n.isPresent}):o.Children.only(r),i=ye(n.ref,function(e){var t,r;let n=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,o=n&&"isReactWarning"in n&&n.isReactWarning;if(o)return e.ref;if(n=null==(r=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:r.get,o=n&&"isReactWarning"in n&&n.isReactWarning,o)return e.props.ref;return e.props.ref||e.ref}(s));return"function"==typeof r||n.isPresent?o.cloneElement(s,{ref:i}):null};function Ho(e){return(null==e?void 0:e.animationName)||"none"}Ko.displayName="Presence";var Go=0;function Vo(){o.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Jo()),document.body.insertAdjacentElement("beforeend",e[1]??Jo()),Go++,()=>{1===Go&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Go--}},[])}function Jo(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Yo=Ir(),Xo=function(){},Zo=o.forwardRef(function(e,t){var r=o.useRef(null),n=o.useState({onScrollCapture:Xo,onWheelCapture:Xo,onTouchMoveCapture:Xo}),s=n[0],i=n[1],a=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,f=e.sideCar,p=e.noIsolation,m=e.inert,g=e.allowPinchZoom,v=e.as,y=void 0===v?"div":v,b=e.gapMode,w=Sr(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=f,x=Nr([r,t]),k=Er(Er({},w),s);return o.createElement(o.Fragment,null,d&&o.createElement(_,{sideCar:Yo,removeScrollBar:u,shards:h,noIsolation:p,inert:m,setCallbacks:i,allowPinchZoom:!!g,lockRef:r,gapMode:b}),a?o.cloneElement(o.Children.only(l),Er(Er({},k),{ref:x})):o.createElement(y,Er({},k,{className:c,ref:x}),l))});Zo.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},Zo.classNames={fullWidth:Cr,zeroRight:Tr};var Qo=!1;if("undefined"!=typeof window)try{var es=Object.defineProperty({},"passive",{get:function(){return Qo=!0,!0}});window.addEventListener("test",es,es),window.removeEventListener("test",es,es)}catch(vh){Qo=!1}var ts=!!Qo&&{passive:!1},rs=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return"hidden"!==r[t]&&!(r.overflowY===r.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===r[t])},ns=function(e,t){var r=t.ownerDocument,n=t;do{if("undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),os(e,n)){var o=ss(e,n);if(o[1]>o[2])return!0}n=n.parentNode}while(n&&n!==r.body);return!1},os=function(e,t){return"v"===e?function(e){return rs(e,"overflowY")}(t):function(e){return rs(e,"overflowX")}(t)},ss=function(e,t){return"v"===e?[(r=t).scrollTop,r.scrollHeight,r.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var r},is=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},as=function(e){return[e.deltaX,e.deltaY]},ls=function(e){return e&&"current"in e?e.current:e},cs=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},us=0,ds=[];function hs(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const fs=Lr(Yo,function(e){var t=o.useRef([]),r=o.useRef([0,0]),n=o.useRef(),s=o.useState(us++)[0],i=o.useState(Wr)[0],a=o.useRef(e);o.useEffect(function(){a.current=e},[e]),o.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var t=jr([e.lockRef.current],(e.shards||[]).map(ls),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=o.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!a.current.allowPinchZoom;var o,s=is(e),i=r.current,l="deltaX"in e?e.deltaX:i[0]-s[0],c="deltaY"in e?e.deltaY:i[1]-s[1],u=e.target,d=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===d&&"range"===u.type)return!1;var h=ns(d,u);if(!h)return!0;if(h?o=d:(o="v"===d?"h":"v",h=ns(d,u)),!h)return!1;if(!n.current&&"changedTouches"in e&&(l||c)&&(n.current=o),!o)return!0;var f=n.current||o;return function(e,t,r,n,o){var s=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),i=s*n,a=r.target,l=t.contains(a),c=!1,u=i>0,d=0,h=0;do{var f=ss(e,a),p=f[0],m=f[1]-f[2]-s*p;(p||m)&&os(e,a)&&(d+=m,h+=p),a=a instanceof ShadowRoot?a.host:a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return u&&(Math.abs(d)<1||!o)?c=!0:u||!(Math.abs(h)<1)&&o||(c=!0),c}(f,t,e,"h"===f?l:c,!0)},[]),c=o.useCallback(function(e){var r=e;if(ds.length&&ds[ds.length-1]===i){var n="deltaY"in r?as(r):is(r),o=t.current.filter(function(e){return e.name===r.type&&(e.target===r.target||r.target===e.shadowParent)&&(t=e.delta,o=n,t[0]===o[0]&&t[1]===o[1]);var t,o})[0];if(o&&o.should)r.cancelable&&r.preventDefault();else if(!o){var s=(a.current.shards||[]).map(ls).filter(Boolean).filter(function(e){return e.contains(r.target)});(s.length>0?l(r,s[0]):!a.current.noIsolation)&&r.cancelable&&r.preventDefault()}}},[]),u=o.useCallback(function(e,r,n,o){var s={name:e,delta:r,target:n,should:o,shadowParent:hs(n)};t.current.push(s),setTimeout(function(){t.current=t.current.filter(function(e){return e!==s})},1)},[]),d=o.useCallback(function(e){r.current=is(e),n.current=void 0},[]),h=o.useCallback(function(t){u(t.type,as(t),t.target,l(t,e.lockRef.current))},[]),f=o.useCallback(function(t){u(t.type,is(t),t.target,l(t,e.lockRef.current))},[]);o.useEffect(function(){return ds.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,ts),document.addEventListener("touchmove",c,ts),document.addEventListener("touchstart",d,ts),function(){ds=ds.filter(function(e){return e!==i}),document.removeEventListener("wheel",c,ts),document.removeEventListener("touchmove",c,ts),document.removeEventListener("touchstart",d,ts)}},[]);var p=e.removeScrollBar,m=e.inert;return o.createElement(o.Fragment,null,m?o.createElement(i,{styles:cs(s)}):null,p?o.createElement(Yr,{gapMode:e.gapMode}):null)});var ps=o.forwardRef(function(e,t){return o.createElement(Zo,Er({},e,{ref:t,sideCar:fs}))});ps.classNames=Zo.classNames;var ms="Dialog",[gs,vs]=Je(ms),[ys,bs]=gs(ms),ws="DialogTrigger";o.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=bs(ws,r),s=ye(t,o.triggerRef);return v.jsx(Qe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Us(o.open),...n,ref:s,onClick:_o(e.onClick,o.onOpenToggle)})}).displayName=ws;var _s="DialogPortal",[xs,ks]=gs(_s,{forceMount:void 0}),Es=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,i=bs(_s,t);return v.jsx(xs,{scope:t,forceMount:r,children:o.Children.map(n,e=>v.jsx(Ko,{present:r||i.open,children:v.jsx(qo,{asChild:!0,container:s,children:e})}))})};Es.displayName=_s;var Ss="DialogOverlay",js=o.forwardRef((e,t)=>{const r=ks(Ss,e.__scopeDialog),{forceMount:n=r.forceMount,...o}=e,s=bs(Ss,e.__scopeDialog);return s.modal?v.jsx(Ko,{present:n||s.open,children:v.jsx(Ts,{...o,ref:t})}):null});js.displayName=Ss;var Ts=o.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=bs(Ss,r);return v.jsx(ps,{as:be,allowPinchZoom:!0,shards:[o.contentRef],children:v.jsx(Qe.div,{"data-state":Us(o.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Cs="DialogContent",Ps=o.forwardRef((e,t)=>{const r=ks(Cs,e.__scopeDialog),{forceMount:n=r.forceMount,...o}=e,s=bs(Cs,e.__scopeDialog);return v.jsx(Ko,{present:n||s.open,children:s.modal?v.jsx(Os,{...o,ref:t}):v.jsx(Rs,{...o,ref:t})})});Ps.displayName=Cs;var Os=o.forwardRef((e,t)=>{const r=bs(Cs,e.__scopeDialog),n=o.useRef(null),s=ye(t,r.contentRef,n);return o.useEffect(()=>{const e=n.current;if(e)return bn(e)},[]),v.jsx(Ns,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:_o(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null==(t=r.triggerRef.current)||t.focus()}),onPointerDownOutside:_o(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:_o(e.onFocusOutside,e=>e.preventDefault())})}),Rs=o.forwardRef((e,t)=>{const r=bs(Cs,e.__scopeDialog),n=o.useRef(!1),s=o.useRef(!1);return v.jsx(Ns,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var o,i;null==(o=e.onCloseAutoFocus)||o.call(e,t),t.defaultPrevented||(n.current||null==(i=r.triggerRef.current)||i.focus(),t.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:t=>{var o,i;null==(o=e.onInteractOutside)||o.call(e,t),t.defaultPrevented||(n.current=!0,"pointerdown"===t.detail.originalEvent.type&&(s.current=!0));const a=t.target;(null==(i=r.triggerRef.current)?void 0:i.contains(a))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&s.current&&t.preventDefault()}})}),Ns=o.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:i,...a}=e,l=bs(Cs,r),c=o.useRef(null),u=ye(t,c);return Vo(),v.jsxs(v.Fragment,{children:[v.jsx(Do,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:i,children:v.jsx(Ro,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Us(l.open),...a,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),v.jsxs(v.Fragment,{children:[v.jsx(zs,{titleId:l.titleId}),v.jsx(qs,{contentRef:c,descriptionId:l.descriptionId})]})]})}),As="DialogTitle",Is=o.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=bs(As,r);return v.jsx(Qe.h2,{id:o.titleId,...n,ref:t})});Is.displayName=As;var $s="DialogDescription",Ls=o.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=bs($s,r);return v.jsx(Qe.p,{id:o.descriptionId,...n,ref:t})});Ls.displayName=$s;var Ds="DialogClose",Ms=o.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=bs(Ds,r);return v.jsx(Qe.button,{type:"button",...n,ref:t,onClick:_o(e.onClick,()=>o.onOpenChange(!1))})});function Us(e){return e?"open":"closed"}Ms.displayName=Ds;var Fs="DialogTitleWarning",[Bs,Ws]=function(e,t){const r=o.createContext(t),n=e=>{const{children:t,...n}=e,s=o.useMemo(()=>n,Object.values(n));return v.jsx(r.Provider,{value:s,children:t})};return n.displayName=e+"Provider",[n,function(n){const s=o.useContext(r);if(s)return s;if(void 0!==t)return t;throw new Error(`\`${n}\` must be used within \`${e}\``)}]}(Fs,{contentName:Cs,titleName:As,docsSlug:"dialog"}),zs=({titleId:e})=>{const t=Ws(Fs),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.\n\nIf you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return o.useEffect(()=>{if(e){document.getElementById(e)||console.error(r)}},[r,e]),null},qs=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Ws("DialogDescriptionWarning").contentName}}.`;return o.useEffect(()=>{var n;const o=null==(n=e.current)?void 0:n.getAttribute("aria-describedby");if(t&&o){document.getElementById(t)||console.warn(r)}},[r,e,t]),null},Ks=js,Hs=Ps,Gs=Is,Vs=Ls,Js=Ms;const Ys=Es,Xs=o.forwardRef(({className:e,...t},r)=>v.jsx(Ks,{ref:r,className:de("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));Xs.displayName=Ks.displayName;o.forwardRef(({className:e,children:t,...r},n)=>v.jsxs(Ys,{children:[v.jsx(Xs,{}),v.jsxs(Hs,{ref:n,className:de("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,v.jsxs(Js,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[v.jsx(Tt,{className:"h-4 w-4"}),v.jsx("span",{className:"sr-only",children:"Close"})]})]})]})).displayName=Hs.displayName;o.forwardRef(({className:e,...t},r)=>v.jsx(Gs,{ref:r,className:de("text-lg font-semibold leading-none tracking-tight",e),...t})).displayName=Gs.displayName;o.forwardRef(({className:e,...t},r)=>v.jsx(Vs,{ref:r,className:de("text-sm text-muted-foreground",e),...t})).displayName=Vs.displayName;const Zs=o.forwardRef(({className:e,...t},r)=>v.jsx(lo,{ref:r,className:de("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));Zs.displayName=lo.displayName;const Qs=o.forwardRef(({className:e,...t},r)=>v.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[v.jsx(Pt,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),v.jsx(lo.Input,{ref:r,className:de("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));Qs.displayName=lo.Input.displayName;const ei=o.forwardRef(({className:e,...t},r)=>v.jsx(lo.List,{ref:r,className:de("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));ei.displayName=lo.List.displayName;const ti=o.forwardRef((e,t)=>v.jsx(lo.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));ti.displayName=lo.Empty.displayName;const ri=o.forwardRef(({className:e,...t},r)=>v.jsx(lo.Group,{ref:r,className:de("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));ri.displayName=lo.Group.displayName;o.forwardRef(({className:e,...t},r)=>v.jsx(lo.Separator,{ref:r,className:de("-mx-1 h-px bg-border",e),...t})).displayName=lo.Separator.displayName;const ni=o.forwardRef(({className:e,...t},r)=>v.jsx(lo.Item,{ref:r,className:de("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));ni.displayName=lo.Item.displayName;const oi=["top","right","bottom","left"],si=Math.min,ii=Math.max,ai=Math.round,li=Math.floor,ci=e=>({x:e,y:e}),ui={left:"right",right:"left",bottom:"top",top:"bottom"},di={start:"end",end:"start"};function hi(e,t,r){return ii(e,si(t,r))}function fi(e,t){return"function"==typeof e?e(t):e}function pi(e){return e.split("-")[0]}function mi(e){return e.split("-")[1]}function gi(e){return"x"===e?"y":"x"}function vi(e){return"y"===e?"height":"width"}function yi(e){return["top","bottom"].includes(pi(e))?"y":"x"}function bi(e){return gi(yi(e))}function wi(e){return e.replace(/start|end/g,e=>di[e])}function _i(e){return e.replace(/left|right|bottom|top/g,e=>ui[e])}function xi(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function ki(e){const{x:t,y:r,width:n,height:o}=e;return{width:n,height:o,top:r,left:t,right:t+n,bottom:r+o,x:t,y:r}}function Ei(e,t,r){let{reference:n,floating:o}=e;const s=yi(t),i=bi(t),a=vi(i),l=pi(t),c="y"===s,u=n.x+n.width/2-o.width/2,d=n.y+n.height/2-o.height/2,h=n[a]/2-o[a]/2;let f;switch(l){case"top":f={x:u,y:n.y-o.height};break;case"bottom":f={x:u,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:d};break;case"left":f={x:n.x-o.width,y:d};break;default:f={x:n.x,y:n.y}}switch(mi(t)){case"start":f[i]-=h*(r&&c?-1:1);break;case"end":f[i]+=h*(r&&c?-1:1)}return f}async function Si(e,t){var r;void 0===t&&(t={});const{x:n,y:o,platform:s,rects:i,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=fi(t,e),p=xi(f),m=a[h?"floating"===d?"reference":"floating":d],g=ki(await s.getClippingRect({element:null==(r=await(null==s.isElement?void 0:s.isElement(m)))||r?m:m.contextElement||await(null==s.getDocumentElement?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),v="floating"===d?{x:n,y:o,width:i.floating.width,height:i.floating.height}:i.reference,y=await(null==s.getOffsetParent?void 0:s.getOffsetParent(a.floating)),b=await(null==s.isElement?void 0:s.isElement(y))&&await(null==s.getScale?void 0:s.getScale(y))||{x:1,y:1},w=ki(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:y,strategy:l}):v);return{top:(g.top-w.top+p.top)/b.y,bottom:(w.bottom-g.bottom+p.bottom)/b.y,left:(g.left-w.left+p.left)/b.x,right:(w.right-g.right+p.right)/b.x}}function ji(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Ti(e){return oi.some(t=>e[t]>=0)}function Ci(){return"undefined"!=typeof window}function Pi(e){return Ni(e)?(e.nodeName||"").toLowerCase():"#document"}function Oi(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function Ri(e){var t;return null==(t=(Ni(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function Ni(e){return!!Ci()&&(e instanceof Node||e instanceof Oi(e).Node)}function Ai(e){return!!Ci()&&(e instanceof Element||e instanceof Oi(e).Element)}function Ii(e){return!!Ci()&&(e instanceof HTMLElement||e instanceof Oi(e).HTMLElement)}function $i(e){return!(!Ci()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof Oi(e).ShadowRoot)}function Li(e){const{overflow:t,overflowX:r,overflowY:n,display:o}=Wi(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(o)}function Di(e){return["table","td","th"].includes(Pi(e))}function Mi(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch(r){return!1}})}function Ui(e){const t=Fi(),r=Ai(e)?Wi(e):e;return"none"!==r.transform||"none"!==r.perspective||!!r.containerType&&"normal"!==r.containerType||!t&&!!r.backdropFilter&&"none"!==r.backdropFilter||!t&&!!r.filter&&"none"!==r.filter||["transform","perspective","filter"].some(e=>(r.willChange||"").includes(e))||["paint","layout","strict","content"].some(e=>(r.contain||"").includes(e))}function Fi(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function Bi(e){return["html","body","#document"].includes(Pi(e))}function Wi(e){return Oi(e).getComputedStyle(e)}function zi(e){return Ai(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function qi(e){if("html"===Pi(e))return e;const t=e.assignedSlot||e.parentNode||$i(e)&&e.host||Ri(e);return $i(t)?t.host:t}function Ki(e){const t=qi(e);return Bi(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ii(t)&&Li(t)?t:Ki(t)}function Hi(e,t,r){var n;void 0===t&&(t=[]),void 0===r&&(r=!0);const o=Ki(e),s=o===(null==(n=e.ownerDocument)?void 0:n.body),i=Oi(o);if(s){const e=Gi(i);return t.concat(i,i.visualViewport||[],Li(o)?o:[],e&&r?Hi(e):[])}return t.concat(o,Hi(o,[],r))}function Gi(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Vi(e){const t=Wi(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const o=Ii(e),s=o?e.offsetWidth:r,i=o?e.offsetHeight:n,a=ai(r)!==s||ai(n)!==i;return a&&(r=s,n=i),{width:r,height:n,$:a}}function Ji(e){return Ai(e)?e:e.contextElement}function Yi(e){const t=Ji(e);if(!Ii(t))return ci(1);const r=t.getBoundingClientRect(),{width:n,height:o,$:s}=Vi(t);let i=(s?ai(r.width):r.width)/n,a=(s?ai(r.height):r.height)/o;return i&&Number.isFinite(i)||(i=1),a&&Number.isFinite(a)||(a=1),{x:i,y:a}}const Xi=ci(0);function Zi(e){const t=Oi(e);return Fi()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:Xi}function Qi(e,t,r,n){void 0===t&&(t=!1),void 0===r&&(r=!1);const o=e.getBoundingClientRect(),s=Ji(e);let i=ci(1);t&&(n?Ai(n)&&(i=Yi(n)):i=Yi(e));const a=function(e,t,r){return void 0===t&&(t=!1),!(!r||t&&r!==Oi(e))&&t}(s,r,n)?Zi(s):ci(0);let l=(o.left+a.x)/i.x,c=(o.top+a.y)/i.y,u=o.width/i.x,d=o.height/i.y;if(s){const e=Oi(s),t=n&&Ai(n)?Oi(n):n;let r=e,o=Gi(r);for(;o&&n&&t!==r;){const e=Yi(o),t=o.getBoundingClientRect(),n=Wi(o),s=t.left+(o.clientLeft+parseFloat(n.paddingLeft))*e.x,i=t.top+(o.clientTop+parseFloat(n.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=s,c+=i,r=Oi(o),o=Gi(r)}}return ki({width:u,height:d,x:l,y:c})}function ea(e,t){const r=zi(e).scrollLeft;return t?t.left+r:Qi(Ri(e)).left+r}function ta(e,t,r){let n;if("viewport"===t)n=function(e,t){const r=Oi(e),n=Ri(e),o=r.visualViewport;let s=n.clientWidth,i=n.clientHeight,a=0,l=0;if(o){s=o.width,i=o.height;const e=Fi();(!e||e&&"fixed"===t)&&(a=o.offsetLeft,l=o.offsetTop)}return{width:s,height:i,x:a,y:l}}(e,r);else if("document"===t)n=function(e){const t=Ri(e),r=zi(e),n=e.ownerDocument.body,o=ii(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),s=ii(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let i=-r.scrollLeft+ea(e);const a=-r.scrollTop;return"rtl"===Wi(n).direction&&(i+=ii(t.clientWidth,n.clientWidth)-o),{width:o,height:s,x:i,y:a}}(Ri(e));else if(Ai(t))n=function(e,t){const r=Qi(e,!0,"fixed"===t),n=r.top+e.clientTop,o=r.left+e.clientLeft,s=Ii(e)?Yi(e):ci(1);return{width:e.clientWidth*s.x,height:e.clientHeight*s.y,x:o*s.x,y:n*s.y}}(t,r);else{const r=Zi(e);n={...t,x:t.x-r.x,y:t.y-r.y}}return ki(n)}function ra(e,t){const r=qi(e);return!(r===t||!Ai(r)||Bi(r))&&("fixed"===Wi(r).position||ra(r,t))}function na(e,t,r){const n=Ii(t),o=Ri(t),s="fixed"===r,i=Qi(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=ci(0);if(n||!n&&!s)if(("body"!==Pi(t)||Li(o))&&(a=zi(t)),n){const e=Qi(t,!0,s,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else o&&(l.x=ea(o));let c=0,u=0;if(o&&!n&&!s){const e=o.getBoundingClientRect();u=e.top+a.scrollTop,c=e.left+a.scrollLeft-ea(o,e)}return{x:i.left+a.scrollLeft-l.x-c,y:i.top+a.scrollTop-l.y-u,width:i.width,height:i.height}}function oa(e){return"static"===Wi(e).position}function sa(e,t){if(!Ii(e)||"fixed"===Wi(e).position)return null;if(t)return t(e);let r=e.offsetParent;return Ri(e)===r&&(r=r.ownerDocument.body),r}function ia(e,t){const r=Oi(e);if(Mi(e))return r;if(!Ii(e)){let t=qi(e);for(;t&&!Bi(t);){if(Ai(t)&&!oa(t))return t;t=qi(t)}return r}let n=sa(e,t);for(;n&&Di(n)&&oa(n);)n=sa(n,t);return n&&Bi(n)&&oa(n)&&!Ui(n)?r:n||function(e){let t=qi(e);for(;Ii(t)&&!Bi(t);){if(Ui(t))return t;if(Mi(t))return null;t=qi(t)}return null}(e)||r}const aa={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:r,offsetParent:n,strategy:o}=e;const s="fixed"===o,i=Ri(n),a=!!t&&Mi(t.floating);if(n===i||a&&s)return r;let l={scrollLeft:0,scrollTop:0},c=ci(1);const u=ci(0),d=Ii(n);if((d||!d&&!s)&&(("body"!==Pi(n)||Li(i))&&(l=zi(n)),Ii(n))){const e=Qi(n);c=Yi(n),u.x=e.x+n.clientLeft,u.y=e.y+n.clientTop}return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+u.x,y:r.y*c.y-l.scrollTop*c.y+u.y}},getDocumentElement:Ri,getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:n,strategy:o}=e;const s=[..."clippingAncestors"===r?Mi(t)?[]:function(e,t){const r=t.get(e);if(r)return r;let n=Hi(e,[],!1).filter(e=>Ai(e)&&"body"!==Pi(e)),o=null;const s="fixed"===Wi(e).position;let i=s?qi(e):e;for(;Ai(i)&&!Bi(i);){const t=Wi(i),r=Ui(i);r||"fixed"!==t.position||(o=null),(s?!r&&!o:!r&&"static"===t.position&&o&&["absolute","fixed"].includes(o.position)||Li(i)&&!r&&ra(e,i))?n=n.filter(e=>e!==i):o=t,i=qi(i)}return t.set(e,n),n}(t,this._c):[].concat(r),n],i=s[0],a=s.reduce((e,r)=>{const n=ta(t,r,o);return e.top=ii(n.top,e.top),e.right=si(n.right,e.right),e.bottom=si(n.bottom,e.bottom),e.left=ii(n.left,e.left),e},ta(t,i,o));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:ia,getElementRects:async function(e){const t=this.getOffsetParent||ia,r=this.getDimensions,n=await r(e.floating);return{reference:na(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:r}=Vi(e);return{width:t,height:r}},getScale:Yi,isElement:Ai,isRTL:function(e){return"rtl"===Wi(e).direction}};function la(e,t,r,n){void 0===n&&(n={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:i="function"==typeof ResizeObserver,layoutShift:a="function"==typeof IntersectionObserver,animationFrame:l=!1}=n,c=Ji(e),u=o||s?[...c?Hi(c):[],...Hi(t)]:[];u.forEach(e=>{o&&e.addEventListener("scroll",r,{passive:!0}),s&&e.addEventListener("resize",r)});const d=c&&a?function(e,t){let r,n=null;const o=Ri(e);function s(){var e;clearTimeout(r),null==(e=n)||e.disconnect(),n=null}return function i(a,l){void 0===a&&(a=!1),void 0===l&&(l=1),s();const{left:c,top:u,width:d,height:h}=e.getBoundingClientRect();if(a||t(),!d||!h)return;const f={rootMargin:-li(u)+"px "+-li(o.clientWidth-(c+d))+"px "+-li(o.clientHeight-(u+h))+"px "+-li(c)+"px",threshold:ii(0,si(1,l))||1};let p=!0;function m(e){const t=e[0].intersectionRatio;if(t!==l){if(!p)return i();t?i(!1,t):r=setTimeout(()=>{i(!1,1e-7)},1e3)}p=!1}try{n=new IntersectionObserver(m,{...f,root:o.ownerDocument})}catch(g){n=new IntersectionObserver(m,f)}n.observe(e)}(!0),s}(c,r):null;let h,f=-1,p=null;i&&(p=new ResizeObserver(e=>{let[n]=e;n&&n.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var e;null==(e=p)||e.observe(t)})),r()}),c&&!l&&p.observe(c),p.observe(t));let m=l?Qi(e):null;return l&&function t(){const n=Qi(e);!m||n.x===m.x&&n.y===m.y&&n.width===m.width&&n.height===m.height||r();m=n,h=requestAnimationFrame(t)}(),r(),()=>{var e;u.forEach(e=>{o&&e.removeEventListener("scroll",r),s&&e.removeEventListener("resize",r)}),null==d||d(),null==(e=p)||e.disconnect(),p=null,l&&cancelAnimationFrame(h)}}const ca=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:o,y:s,placement:i,middlewareData:a}=t,l=await async function(e,t){const{placement:r,platform:n,elements:o}=e,s=await(null==n.isRTL?void 0:n.isRTL(o.floating)),i=pi(r),a=mi(r),l="y"===yi(r),c=["left","top"].includes(i)?-1:1,u=s&&l?-1:1,d=fi(t,e);let{mainAxis:h,crossAxis:f,alignmentAxis:p}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&"number"==typeof p&&(f="end"===a?-1*p:p),l?{x:f*u,y:h*c}:{x:h*c,y:f*u}}(t,e);return i===(null==(r=a.offset)?void 0:r.placement)&&null!=(n=a.arrow)&&n.alignmentOffset?{}:{x:o+l.x,y:s+l.y,data:{...l,placement:i}}}}},ua=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:o}=t,{mainAxis:s=!0,crossAxis:i=!1,limiter:a={fn:e=>{let{x:t,y:r}=e;return{x:t,y:r}}},...l}=fi(e,t),c={x:r,y:n},u=await Si(t,l),d=yi(pi(o)),h=gi(d);let f=c[h],p=c[d];if(s){const e="y"===h?"bottom":"right";f=hi(f+u["y"===h?"top":"left"],f,f-u[e])}if(i){const e="y"===d?"bottom":"right";p=hi(p+u["y"===d?"top":"left"],p,p-u[e])}const m=a.fn({...t,[h]:f,[d]:p});return{...m,data:{x:m.x-r,y:m.y-n,enabled:{[h]:s,[d]:i}}}}}},da=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:o,middlewareData:s,rects:i,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=fi(e,t);if(null!=(r=s.arrow)&&r.alignmentOffset)return{};const v=pi(o),y=yi(a),b=pi(a)===a,w=await(null==l.isRTL?void 0:l.isRTL(c.floating)),_=h||(b||!m?[_i(a)]:function(e){const t=_i(e);return[wi(e),t,wi(t)]}(a)),x="none"!==p;!h&&x&&_.push(...function(e,t,r,n){const o=mi(e);let s=function(e,t,r){const n=["left","right"],o=["right","left"],s=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return r?t?o:n:t?n:o;case"left":case"right":return t?s:i;default:return[]}}(pi(e),"start"===r,n);return o&&(s=s.map(e=>e+"-"+o),t&&(s=s.concat(s.map(wi)))),s}(a,m,p,w));const k=[a,..._],E=await Si(t,g),S=[];let j=(null==(n=s.flip)?void 0:n.overflows)||[];if(u&&S.push(E[v]),d){const e=function(e,t,r){void 0===r&&(r=!1);const n=mi(e),o=bi(e),s=vi(o);let i="x"===o?n===(r?"end":"start")?"right":"left":"start"===n?"bottom":"top";return t.reference[s]>t.floating[s]&&(i=_i(i)),[i,_i(i)]}(o,i,w);S.push(E[e[0]],E[e[1]])}if(j=[...j,{placement:o,overflows:S}],!S.every(e=>e<=0)){var T,C;const e=((null==(T=s.flip)?void 0:T.index)||0)+1,t=k[e];if(t)return{data:{index:e,overflows:j},reset:{placement:t}};let r=null==(C=j.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:C.placement;if(!r)switch(f){case"bestFit":{var P;const e=null==(P=j.filter(e=>{if(x){const t=yi(e.placement);return t===y||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:P[0];e&&(r=e);break}case"initialPlacement":r=a}if(o!==r)return{reset:{placement:r}}}return{}}}},ha=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:o,rects:s,platform:i,elements:a}=t,{apply:l=()=>{},...c}=fi(e,t),u=await Si(t,c),d=pi(o),h=mi(o),f="y"===yi(o),{width:p,height:m}=s.floating;let g,v;"top"===d||"bottom"===d?(g=d,v=h===(await(null==i.isRTL?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(v=d,g="end"===h?"top":"bottom");const y=m-u.top-u.bottom,b=p-u.left-u.right,w=si(m-u[g],y),_=si(p-u[v],b),x=!t.middlewareData.shift;let k=w,E=_;if(null!=(r=t.middlewareData.shift)&&r.enabled.x&&(E=b),null!=(n=t.middlewareData.shift)&&n.enabled.y&&(k=y),x&&!h){const e=ii(u.left,0),t=ii(u.right,0),r=ii(u.top,0),n=ii(u.bottom,0);f?E=p-2*(0!==e||0!==t?e+t:ii(u.left,u.right)):k=m-2*(0!==r||0!==n?r+n:ii(u.top,u.bottom))}await l({...t,availableWidth:E,availableHeight:k});const S=await i.getDimensions(a.floating);return p!==S.width||m!==S.height?{reset:{rects:!0}}:{}}}},fa=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...o}=fi(e,t);switch(n){case"referenceHidden":{const e=ji(await Si(t,{...o,elementContext:"reference"}),r.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:Ti(e)}}}case"escaped":{const e=ji(await Si(t,{...o,altBoundary:!0}),r.floating);return{data:{escapedOffsets:e,escaped:Ti(e)}}}default:return{}}}}},pa=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:o,rects:s,platform:i,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=fi(e,t)||{};if(null==c)return{};const d=xi(u),h={x:r,y:n},f=bi(o),p=vi(f),m=await i.getDimensions(c),g="y"===f,v=g?"top":"left",y=g?"bottom":"right",b=g?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[f]-h[f]-s.floating[p],_=h[f]-s.reference[f],x=await(null==i.getOffsetParent?void 0:i.getOffsetParent(c));let k=x?x[b]:0;k&&await(null==i.isElement?void 0:i.isElement(x))||(k=a.floating[b]||s.floating[p]);const E=w/2-_/2,S=k/2-m[p]/2-1,j=si(d[v],S),T=si(d[y],S),C=j,P=k-m[p]-T,O=k/2-m[p]/2+E,R=hi(C,O,P),N=!l.arrow&&null!=mi(o)&&O!==R&&s.reference[p]/2-(O<C?j:T)-m[p]/2<0,A=N?O<C?O-C:O-P:0;return{[f]:h[f]+A,data:{[f]:R,centerOffset:O-R-A,...N&&{alignmentOffset:A}},reset:N}}}),ma=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:o,rects:s,middlewareData:i}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=fi(e,t),u={x:r,y:n},d=yi(o),h=gi(d);let f=u[h],p=u[d];const m=fi(a,t),g="number"==typeof m?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const e="y"===h?"height":"width",t=s.reference[h]-s.floating[e]+g.mainAxis,r=s.reference[h]+s.reference[e]-g.mainAxis;f<t?f=t:f>r&&(f=r)}if(c){var v,y;const e="y"===h?"width":"height",t=["top","left"].includes(pi(o)),r=s.reference[d]-s.floating[e]+(t&&(null==(v=i.offset)?void 0:v[d])||0)+(t?0:g.crossAxis),n=s.reference[d]+s.reference[e]+(t?0:(null==(y=i.offset)?void 0:y[d])||0)-(t?g.crossAxis:0);p<r?p=r:p>n&&(p=n)}return{[h]:f,[d]:p}}}},ga=(e,t,r)=>{const n=new Map,o={platform:aa,...r},s={...o.platform,_c:n};return(async(e,t,r)=>{const{placement:n="bottom",strategy:o="absolute",middleware:s=[],platform:i}=r,a=s.filter(Boolean),l=await(null==i.isRTL?void 0:i.isRTL(t));let c=await i.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:d}=Ei(c,n,l),h=n,f={},p=0;for(let m=0;m<a.length;m++){const{name:r,fn:s}=a[m],{x:g,y:v,data:y,reset:b}=await s({x:u,y:d,initialPlacement:n,placement:h,strategy:o,middlewareData:f,rects:c,platform:i,elements:{reference:e,floating:t}});u=null!=g?g:u,d=null!=v?v:d,f={...f,[r]:{...f[r],...y}},b&&p<=50&&(p++,"object"==typeof b&&(b.placement&&(h=b.placement),b.rects&&(c=!0===b.rects?await i.getElementRects({reference:e,floating:t,strategy:o}):b.rects),({x:u,y:d}=Ei(c,h,l))),m=-1)}return{x:u,y:d,placement:h,strategy:o,middlewareData:f}})(e,t,{...o,platform:s})};var va="undefined"!=typeof document?t.useLayoutEffect:t.useEffect;function ya(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let r,n,o;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;0!==n--;)if(!ya(e[n],t[n]))return!1;return!0}if(o=Object.keys(e),r=o.length,r!==Object.keys(t).length)return!1;for(n=r;0!==n--;)if(!{}.hasOwnProperty.call(t,o[n]))return!1;for(n=r;0!==n--;){const r=o[n];if(("_owner"!==r||!e.$$typeof)&&!ya(e[r],t[r]))return!1}return!0}return e!=e&&t!=t}function ba(e){if("undefined"==typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function wa(e,t){const r=ba(e);return Math.round(t*r)/r}function _a(e){const t=o.useRef(e);return va(()=>{t.current=e}),t}const xa=e=>({name:"arrow",options:e,fn(t){const{element:r,padding:n}="function"==typeof e?e(t):e;return r&&(o=r,{}.hasOwnProperty.call(o,"current"))?null!=r.current?pa({element:r.current,padding:n}).fn(t):{}:r?pa({element:r,padding:n}).fn(t):{};var o}}),ka=(e,t)=>({...ua(e),options:[e,t]}),Ea=(e,t)=>({...ma(e),options:[e,t]}),Sa=(e,t)=>({...da(e),options:[e,t]}),ja=(e,t)=>({...ha(e),options:[e,t]}),Ta=(e,t)=>({...fa(e),options:[e,t]}),Ca=(e,t)=>({...xa(e),options:[e,t]});var Pa=o.forwardRef((e,t)=>{const{children:r,width:n=10,height:o=5,...s}=e;return v.jsx(Qe.svg,{...s,ref:t,width:n,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:v.jsx("polygon",{points:"0,0 30,0 15,10"})})});Pa.displayName="Arrow";var Oa=Pa;function Ra(...e){const t=e[0];if(1===e.length)return t;const r=()=>{const r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const n=r.reduce((t,{useScope:r,scopeName:n})=>({...t,...r(e)[`__scope${n}`]}),{});return o.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return r.scopeName=t.scopeName,r}var Na="Popper",[Aa,Ia]=function(e,t=[]){let r=[];const n=()=>{const t=r.map(e=>o.createContext(e));return function(r){const n=(null==r?void 0:r[e])||t;return o.useMemo(()=>({[`__scope${e}`]:{...r,[e]:n}}),[r,n])}};return n.scopeName=e,[function(t,n){const s=o.createContext(n),i=r.length;function a(t){const{scope:r,children:n,...a}=t,l=(null==r?void 0:r[e][i])||s,c=o.useMemo(()=>a,Object.values(a));return v.jsx(l.Provider,{value:c,children:n})}return r=[...r,n],a.displayName=t+"Provider",[a,function(r,a){const l=(null==a?void 0:a[e][i])||s,c=o.useContext(l);if(c)return c;if(void 0!==n)return n;throw new Error(`\`${r}\` must be used within \`${t}\``)}]},Ra(n,...t)]}(Na),[$a,La]=Aa(Na),Da=e=>{const{__scopePopper:t,children:r}=e,[n,s]=o.useState(null);return v.jsx($a,{scope:t,anchor:n,onAnchorChange:s,children:r})};Da.displayName=Na;var Ma="PopperAnchor",Ua=o.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,i=La(Ma,r),a=o.useRef(null),l=ye(t,a);return o.useEffect(()=>{i.onAnchorChange((null==n?void 0:n.current)||a.current)}),n?null:v.jsx(Qe.div,{...s,ref:l})});Ua.displayName=Ma;var Fa="PopperContent",[Ba,Wa]=Aa(Fa),za=o.forwardRef((e,t)=>{var r,n,i,a,l,c;const{__scopePopper:u,side:d="bottom",sideOffset:h=0,align:f="center",alignOffset:p=0,arrowPadding:m=0,avoidCollisions:g=!0,collisionBoundary:y=[],collisionPadding:b=0,sticky:w="partial",hideWhenDetached:_=!1,updatePositionStrategy:x="optimized",onPlaced:k,...E}=e,S=La(Fa,u),[j,T]=o.useState(null),C=ye(t,e=>T(e)),[P,O]=o.useState(null),R=function(e){const[t,r]=o.useState(void 0);return Ze(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver(t=>{if(!Array.isArray(t))return;if(!t.length)return;const n=t[0];let o,s;if("borderBoxSize"in n){const e=n.borderBoxSize,t=Array.isArray(e)?e[0]:e;o=t.inlineSize,s=t.blockSize}else o=e.offsetWidth,s=e.offsetHeight;r({width:o,height:s})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}(P),N=(null==R?void 0:R.width)??0,A=(null==R?void 0:R.height)??0,I=d+("center"!==f?"-"+f:""),$="number"==typeof b?b:{top:0,right:0,bottom:0,left:0,...b},L=Array.isArray(y)?y:[y],D=L.length>0,M={padding:$,boundary:L.filter(Ga),altBoundary:D},{refs:U,floatingStyles:F,placement:B,isPositioned:W,middlewareData:z}=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:a,floating:l}={},transform:c=!0,whileElementsMounted:u,open:d}=e,[h,f]=o.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[p,m]=o.useState(n);ya(p,n)||m(n);const[g,v]=o.useState(null),[y,b]=o.useState(null),w=o.useCallback(e=>{e!==E.current&&(E.current=e,v(e))},[]),_=o.useCallback(e=>{e!==S.current&&(S.current=e,b(e))},[]),x=a||g,k=l||y,E=o.useRef(null),S=o.useRef(null),j=o.useRef(h),T=null!=u,C=_a(u),P=_a(i),O=_a(d),R=o.useCallback(()=>{if(!E.current||!S.current)return;const e={placement:t,strategy:r,middleware:p};P.current&&(e.platform=P.current),ga(E.current,S.current,e).then(e=>{const t={...e,isPositioned:!1!==O.current};N.current&&!ya(j.current,t)&&(j.current=t,s.flushSync(()=>{f(t)}))})},[p,t,r,P,O]);va(()=>{!1===d&&j.current.isPositioned&&(j.current.isPositioned=!1,f(e=>({...e,isPositioned:!1})))},[d]);const N=o.useRef(!1);va(()=>(N.current=!0,()=>{N.current=!1}),[]),va(()=>{if(x&&(E.current=x),k&&(S.current=k),x&&k){if(C.current)return C.current(x,k,R);R()}},[x,k,R,C,T]);const A=o.useMemo(()=>({reference:E,floating:S,setReference:w,setFloating:_}),[w,_]),I=o.useMemo(()=>({reference:x,floating:k}),[x,k]),$=o.useMemo(()=>{const e={position:r,left:0,top:0};if(!I.floating)return e;const t=wa(I.floating,h.x),n=wa(I.floating,h.y);return c?{...e,transform:"translate("+t+"px, "+n+"px)",...ba(I.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:t,top:n}},[r,c,I.floating,h.x,h.y]);return o.useMemo(()=>({...h,update:R,refs:A,elements:I,floatingStyles:$}),[h,R,A,I,$])}({strategy:"fixed",placement:I,whileElementsMounted:(...e)=>la(...e,{animationFrame:"always"===x}),elements:{reference:S.anchor},middleware:[(q={mainAxis:h+A,alignmentAxis:p},{...ca(q),options:[q,K]}),g&&ka({mainAxis:!0,crossAxis:!1,limiter:"partial"===w?Ea():void 0,...M}),g&&Sa({...M}),ja({...M,apply:({elements:e,rects:t,availableWidth:r,availableHeight:n})=>{const{width:o,height:s}=t.reference,i=e.floating.style;i.setProperty("--radix-popper-available-width",`${r}px`),i.setProperty("--radix-popper-available-height",`${n}px`),i.setProperty("--radix-popper-anchor-width",`${o}px`),i.setProperty("--radix-popper-anchor-height",`${s}px`)}}),P&&Ca({element:P,padding:m}),Va({arrowWidth:N,arrowHeight:A}),_&&Ta({strategy:"referenceHidden",...M})]});var q,K;const[H,G]=Ja(B),V=Xe(k);Ze(()=>{W&&(null==V||V())},[W,V]);const J=null==(r=z.arrow)?void 0:r.x,Y=null==(n=z.arrow)?void 0:n.y,X=0!==(null==(i=z.arrow)?void 0:i.centerOffset),[Z,Q]=o.useState();return Ze(()=>{j&&Q(window.getComputedStyle(j).zIndex)},[j]),v.jsx("div",{ref:U.setFloating,"data-radix-popper-content-wrapper":"",style:{...F,transform:W?F.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Z,"--radix-popper-transform-origin":[null==(a=z.transformOrigin)?void 0:a.x,null==(l=z.transformOrigin)?void 0:l.y].join(" "),...(null==(c=z.hide)?void 0:c.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:v.jsx(Ba,{scope:u,placedSide:H,onArrowChange:O,arrowX:J,arrowY:Y,shouldHideArrow:X,children:v.jsx(Qe.div,{"data-side":H,"data-align":G,...E,ref:C,style:{...E.style,animation:W?void 0:"none"}})})})});za.displayName=Fa;var qa="PopperArrow",Ka={top:"bottom",right:"left",bottom:"top",left:"right"},Ha=o.forwardRef(function(e,t){const{__scopePopper:r,...n}=e,o=Wa(qa,r),s=Ka[o.placedSide];return v.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:v.jsx(Oa,{...n,ref:t,style:{...n.style,display:"block"}})})});function Ga(e){return null!==e}Ha.displayName=qa;var Va=e=>({name:"transformOrigin",options:e,fn(t){var r,n,o;const{placement:s,rects:i,middlewareData:a}=t,l=0!==(null==(r=a.arrow)?void 0:r.centerOffset),c=l?0:e.arrowWidth,u=l?0:e.arrowHeight,[d,h]=Ja(s),f={start:"0%",center:"50%",end:"100%"}[h],p=((null==(n=a.arrow)?void 0:n.x)??0)+c/2,m=((null==(o=a.arrow)?void 0:o.y)??0)+u/2;let g="",v="";return"bottom"===d?(g=l?f:`${p}px`,v=-u+"px"):"top"===d?(g=l?f:`${p}px`,v=`${i.floating.height+u}px`):"right"===d?(g=-u+"px",v=l?f:`${m}px`):"left"===d&&(g=`${i.floating.width+u}px`,v=l?f:`${m}px`),{data:{x:g,y:v}}}});function Ja(e){const[t,r="center"]=e.split("-");return[t,r]}var Ya=Da,Xa=Ua,Za=za,Qa=Ha,el="Popover",[tl,rl]=Je(el,[Ia]),nl=Ia(),[ol,sl]=tl(el),il=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:s,onOpenChange:i,modal:a=!1}=e,l=nl(t),c=o.useRef(null),[u,d]=o.useState(!1),[h=!1,f]=So({prop:n,defaultProp:s,onChange:i});return v.jsx(Ya,{...l,children:v.jsx(ol,{scope:t,contentId:Eo(),triggerRef:c,open:h,onOpenChange:f,onOpenToggle:o.useCallback(()=>f(e=>!e),[f]),hasCustomAnchor:u,onCustomAnchorAdd:o.useCallback(()=>d(!0),[]),onCustomAnchorRemove:o.useCallback(()=>d(!1),[]),modal:a,children:r})})};il.displayName=el;var al="PopoverAnchor";o.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=sl(al,r),i=nl(r),{onCustomAnchorAdd:a,onCustomAnchorRemove:l}=s;return o.useEffect(()=>(a(),()=>l()),[a,l]),v.jsx(Xa,{...i,...n,ref:t})}).displayName=al;var ll="PopoverTrigger",cl=o.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,o=sl(ll,r),s=nl(r),i=ye(t,o.triggerRef),a=v.jsx(Qe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":wl(o.open),...n,ref:i,onClick:_o(e.onClick,o.onOpenToggle)});return o.hasCustomAnchor?a:v.jsx(Xa,{asChild:!0,...s,children:a})});cl.displayName=ll;var ul="PopoverPortal",[dl,hl]=tl(ul,{forceMount:void 0}),fl=e=>{const{__scopePopover:t,forceMount:r,children:n,container:o}=e,s=sl(ul,t);return v.jsx(dl,{scope:t,forceMount:r,children:v.jsx(Ko,{present:r||s.open,children:v.jsx(qo,{asChild:!0,container:o,children:n})})})};fl.displayName=ul;var pl="PopoverContent",ml=o.forwardRef((e,t)=>{const r=hl(pl,e.__scopePopover),{forceMount:n=r.forceMount,...o}=e,s=sl(pl,e.__scopePopover);return v.jsx(Ko,{present:n||s.open,children:s.modal?v.jsx(gl,{...o,ref:t}):v.jsx(vl,{...o,ref:t})})});ml.displayName=pl;var gl=o.forwardRef((e,t)=>{const r=sl(pl,e.__scopePopover),n=o.useRef(null),s=ye(t,n),i=o.useRef(!1);return o.useEffect(()=>{const e=n.current;if(e)return bn(e)},[]),v.jsx(ps,{as:be,allowPinchZoom:!0,children:v.jsx(yl,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:_o(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),i.current||null==(t=r.triggerRef.current)||t.focus()}),onPointerDownOutside:_o(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey,n=2===t.button||r;i.current=n},{checkForDefaultPrevented:!1}),onFocusOutside:_o(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),vl=o.forwardRef((e,t)=>{const r=sl(pl,e.__scopePopover),n=o.useRef(!1),s=o.useRef(!1);return v.jsx(yl,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var o,i;null==(o=e.onCloseAutoFocus)||o.call(e,t),t.defaultPrevented||(n.current||null==(i=r.triggerRef.current)||i.focus(),t.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:t=>{var o,i;null==(o=e.onInteractOutside)||o.call(e,t),t.defaultPrevented||(n.current=!0,"pointerdown"===t.detail.originalEvent.type&&(s.current=!0));const a=t.target;(null==(i=r.triggerRef.current)?void 0:i.contains(a))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&s.current&&t.preventDefault()}})}),yl=o.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:o,onCloseAutoFocus:s,disableOutsidePointerEvents:i,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=e,h=sl(pl,r),f=nl(r);return Vo(),v.jsx(Do,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:o,onUnmountAutoFocus:s,children:v.jsx(Ro,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>h.onOpenChange(!1),children:v.jsx(Za,{"data-state":wl(h.open),role:"dialog",id:h.contentId,...f,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),bl="PopoverClose";o.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,o=sl(bl,r);return v.jsx(Qe.button,{type:"button",...n,ref:t,onClick:_o(e.onClick,()=>o.onOpenChange(!1))})}).displayName=bl;function wl(e){return e?"open":"closed"}o.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,o=nl(r);return v.jsx(Qa,{...o,...n,ref:t})}).displayName="PopoverArrow";var _l=fl,xl=ml;const kl=il,El=cl,Sl=o.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},o)=>v.jsx(_l,{children:v.jsx(xl,{ref:o,align:t,sideOffset:r,className:de("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));function jl({regions:e,selectedRegionId:r,onRegionChange:n,disabled:o=!1}){const[s,i]=t.useState(!1),a=t.useMemo(()=>"all"===r?null:e.find(e=>e.id.toString()===r),[e,r]);return v.jsxs(kl,{open:s,onOpenChange:i,children:[v.jsx(El,{asChild:!0,children:v.jsxs(Pe,{variant:"outline",role:"combobox","aria-expanded":s,className:"w-[180px] justify-between",disabled:o,children:[v.jsx(Be,{className:"h-4 w-4 mr-2"}),v.jsx("span",{className:"truncate",children:a?a.name:"Все регионаы"}),v.jsx(De,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),v.jsx(Sl,{className:"w-[200px] p-0",children:v.jsxs(Zs,{children:[v.jsx(Qs,{placeholder:"Search regions..."}),v.jsxs(ei,{children:[v.jsx(ti,{children:"No region found."}),v.jsxs(ri,{children:[v.jsxs(ni,{value:"all",onSelect:()=>{n("all"),i(!1)},children:[v.jsx(Ie,{className:de("mr-2 h-4 w-4","all"===r?"opacity-100":"opacity-0")}),"Все регионы"]}),e.map(e=>v.jsxs(ni,{value:e.name,onSelect:()=>{n(e.id.toString()),i(!1)},children:[v.jsx(Ie,{className:de("mr-2 h-4 w-4",r===e.id.toString()?"opacity-100":"opacity-0")}),e.name]},e.id))]})]})]})})]})}Sl.displayName=xl.displayName;class Tl extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class Cl extends Tl{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Pl extends Tl{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ol extends Tl{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Rl,Nl;(Nl=Rl||(Rl={})).Any="any",Nl.ApNortheast1="ap-northeast-1",Nl.ApNortheast2="ap-northeast-2",Nl.ApSouth1="ap-south-1",Nl.ApSoutheast1="ap-southeast-1",Nl.ApSoutheast2="ap-southeast-2",Nl.CaCentral1="ca-central-1",Nl.EuCentral1="eu-central-1",Nl.EuWest1="eu-west-1",Nl.EuWest2="eu-west-2",Nl.EuWest3="eu-west-3",Nl.SaEast1="sa-east-1",Nl.UsEast1="us-east-1",Nl.UsWest1="us-west-1",Nl.UsWest2="us-west-2";var Al=function(e,t,r,n){return new(r||(r=Promise))(function(o,s){function i(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,a)}l((n=n.apply(e,t||[])).next())})};class Il{constructor(e,{headers:t={},customFetch:r,region:n=Rl.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(()=>Gl).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)})(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return Al(this,void 0,void 0,function*(){try{const{headers:n,method:o,body:s}=t;let i={},{region:a}=t;a||(a=this.region);const l=new URL(`${this.url}/${e}`);let c;a&&"any"!==a&&(i["x-region"]=a,l.searchParams.set("forceFunctionRegion",a)),s&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&("undefined"!=typeof Blob&&s instanceof Blob||s instanceof ArrayBuffer?(i["Content-Type"]="application/octet-stream",c=s):"string"==typeof s?(i["Content-Type"]="text/plain",c=s):"undefined"!=typeof FormData&&s instanceof FormData?c=s:(i["Content-Type"]="application/json",c=JSON.stringify(s)));const u=yield this.fetch(l.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},i),this.headers),n),body:c}).catch(e=>{throw new Cl(e)}),d=u.headers.get("x-relay-error");if(d&&"true"===d)throw new Pl(u);if(!u.ok)throw new Ol(u);let h,f=(null!==(r=u.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return h="application/json"===f?yield u.json():"application/octet-stream"===f?yield u.blob():"text/event-stream"===f?u:"multipart/form-data"===f?yield u.formData():yield u.text(),{data:h,error:null,response:u}}catch(n){return{data:null,error:n,response:n instanceof Ol||n instanceof Pl?n.context:void 0}}})}}var $l={},Ll={},Dl={},Ml={},Ul={},Fl={},Bl=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof globalThis)return globalThis;throw new Error("unable to locate global object")}();const Wl=Bl.fetch,zl=Bl.fetch.bind(Bl),ql=Bl.Headers,Kl=Bl.Request,Hl=Bl.Response,Gl=Object.freeze(Object.defineProperty({__proto__:null,Headers:ql,Request:Kl,Response:Hl,default:zl,fetch:Wl},Symbol.toStringTag,{value:"Module"})),Vl=a(Gl);var Jl={};Object.defineProperty(Jl,"__esModule",{value:!0});let Yl=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Jl.default=Yl;var Xl=i&&i.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fl,"__esModule",{value:!0});const Zl=Xl(Vl),Ql=Xl(Jl);Fl.default=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(r=e.isMaybeSingle)&&void 0!==r&&r,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=Zl.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,r,n,o;let s=null,i=null,a=null,l=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const r=await e.text();""===r||(i="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?r:JSON.parse(r))}const o=null===(r=this.headers.get("Prefer"))||void 0===r?void 0:r.match(/count=(exact|planned|estimated)/),u=null===(n=e.headers.get("content-range"))||void 0===n?void 0:n.split("/");o&&u&&u.length>1&&(a=parseInt(u[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(i)&&(i.length>1?(s={code:"PGRST116",details:`Results contain ${i.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},i=null,a=null,l=406,c="Not Acceptable"):i=1===i.length?i[0]:null)}else{const t=await e.text();try{s=JSON.parse(t),Array.isArray(s)&&404===e.status&&(i=[],s=null,l=200,c="OK")}catch(u){404===e.status&&""===t?(l=204,c="No Content"):s={message:t}}if(s&&this.isMaybeSingle&&(null===(o=null==s?void 0:s.details)||void 0===o?void 0:o.includes("0 rows"))&&(s=null,l=200,c="OK"),s&&this.shouldThrowOnError)throw new Ql.default(s)}return{error:s,data:i,count:a,status:l,statusText:c}});return this.shouldThrowOnError||(r=r.catch(e=>{var t,r,n;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(r=null==e?void 0:e.stack)&&void 0!==r?r:""}`,hint:"",code:`${null!==(n=null==e?void 0:e.code)&&void 0!==n?n:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}};var ec=i&&i.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ul,"__esModule",{value:!0});const tc=ec(Fl);let rc=class extends tc.default{select(e){let t=!1;const r=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:o=n}={}){const s=o?`${o}.order`:"order",i=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const o=void 0===n?"offset":`${n}.offset`,s=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(s,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:o=!1,format:s="text"}={}){var i;const a=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,o?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.get("Accept"))&&void 0!==i?i:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${l}"; options=${a};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Ul.default=rc;var nc=i&&i.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ml,"__esModule",{value:!0});const oc=nc(Ul);let sc=class extends oc.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let o="";"plain"===n?o="pl":"phrase"===n?o="ph":"websearch"===n&&(o="w");const s=void 0===r?"":`(${r})`;return this.url.searchParams.append(e,`${o}fts${s}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};Ml.default=sc;var ic=i&&i.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Dl,"__esModule",{value:!0});const ac=ic(Ml);Dl.default=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}select(e,{head:t=!1,count:r}={}){const n=t?"HEAD":"GET";let o=!1;const s=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!o?"":('"'===e&&(o=!o),e)).join("");return this.url.searchParams.set("select",s),r&&this.headers.append("Prefer",`count=${r}`),new ac.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new ac.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:o=!0}={}){var s;if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),void 0!==t&&this.url.searchParams.set("on_conflict",t),n&&this.headers.append("Prefer",`count=${n}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new ac.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}update(e,{count:t}={}){var r;return t&&this.headers.append("Prefer",`count=${t}`),new ac.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}delete({count:e}={}){var t;return e&&this.headers.append("Prefer",`count=${e}`),new ac.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}};var lc=i&&i.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ll,"__esModule",{value:!0});const cc=lc(Dl),uc=lc(Ml);Ll.default=class e{constructor(e,{headers:t={},schema:r,fetch:n}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=n}from(e){const t=new URL(`${this.url}/${e}`);return new cc.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:n=!1,count:o}={}){var s;let i;const a=new URL(`${this.url}/rpc/${e}`);let l;r||n?(i=r?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{a.searchParams.append(e,t)})):(i="POST",l=t);const c=new Headers(this.headers);return o&&c.set("Prefer",`count=${o}`),new uc.default({method:i,url:a,headers:c,schema:this.schemaName,body:l,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}};var dc=i&&i.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($l,"__esModule",{value:!0}),$l.PostgrestError=$l.PostgrestBuilder=$l.PostgrestTransformBuilder=$l.PostgrestFilterBuilder=$l.PostgrestQueryBuilder=$l.PostgrestClient=void 0;const hc=dc(Ll);$l.PostgrestClient=hc.default;const fc=dc(Dl);$l.PostgrestQueryBuilder=fc.default;const pc=dc(Ml);$l.PostgrestFilterBuilder=pc.default;const mc=dc(Ul);$l.PostgrestTransformBuilder=mc.default;const gc=dc(Fl);$l.PostgrestBuilder=gc.default;const vc=dc(Jl);$l.PostgrestError=vc.default;var yc=$l.default={PostgrestClient:hc.default,PostgrestQueryBuilder:fc.default,PostgrestFilterBuilder:pc.default,PostgrestTransformBuilder:mc.default,PostgrestBuilder:gc.default,PostgrestError:vc.default};const{PostgrestClient:bc,PostgrestQueryBuilder:wc,PostgrestFilterBuilder:_c,PostgrestTransformBuilder:xc,PostgrestBuilder:kc,PostgrestError:Ec}=yc;class Sc{static detectEnvironment(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process&&process.versions&&process.versions.node){const e=parseInt(process.versions.node.split(".")[0]);return e>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${e} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${e} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}}const jc=1e4;var Tc,Cc,Pc,Oc,Rc,Nc,Ac,Ic,$c,Lc,Dc;(Cc=Tc||(Tc={}))[Cc.connecting=0]="connecting",Cc[Cc.open=1]="open",Cc[Cc.closing=2]="closing",Cc[Cc.closed=3]="closed",(Oc=Pc||(Pc={})).closed="closed",Oc.errored="errored",Oc.joined="joined",Oc.joining="joining",Oc.leaving="leaving",(Nc=Rc||(Rc={})).close="phx_close",Nc.error="phx_error",Nc.join="phx_join",Nc.reply="phx_reply",Nc.leave="phx_leave",Nc.access_token="access_token",(Ac||(Ac={})).websocket="websocket",($c=Ic||(Ic={})).Connecting="connecting",$c.Open="open",$c.Closing="closing",$c.Closed="closed";class Mc{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const n=t.getUint8(1),o=t.getUint8(2);let s=this.HEADER_LENGTH+2;const i=r.decode(e.slice(s,s+n));s+=n;const a=r.decode(e.slice(s,s+o));s+=o;return{ref:null,topic:i,event:a,payload:JSON.parse(r.decode(e.slice(s,e.byteLength)))}}}class Uc{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(Dc=Lc||(Lc={})).abstime="abstime",Dc.bool="bool",Dc.date="date",Dc.daterange="daterange",Dc.float4="float4",Dc.float8="float8",Dc.int2="int2",Dc.int4="int4",Dc.int4range="int4range",Dc.int8="int8",Dc.int8range="int8range",Dc.json="json",Dc.jsonb="jsonb",Dc.money="money",Dc.numeric="numeric",Dc.oid="oid",Dc.reltime="reltime",Dc.text="text",Dc.time="time",Dc.timestamp="timestamp",Dc.timestamptz="timestamptz",Dc.timetz="timetz",Dc.tsrange="tsrange",Dc.tstzrange="tstzrange";const Fc=(e,t,r={})=>{var n;const o=null!==(n=r.skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce((r,n)=>(r[n]=Bc(n,e,t,o),r),{})},Bc=(e,t,r,n)=>{const o=t.find(t=>t.name===e),s=null==o?void 0:o.type,i=r[e];return s&&!n.includes(s)?Wc(s,i):zc(i)},Wc=(e,t)=>{if("_"===e.charAt(0)){const r=e.slice(1,e.length);return Gc(t,r)}switch(e){case Lc.bool:return qc(t);case Lc.float4:case Lc.float8:case Lc.int2:case Lc.int4:case Lc.int8:case Lc.numeric:case Lc.oid:return Kc(t);case Lc.json:case Lc.jsonb:return Hc(t);case Lc.timestamp:return Vc(t);case Lc.abstime:case Lc.date:case Lc.daterange:case Lc.int4range:case Lc.int8range:case Lc.money:case Lc.reltime:case Lc.text:case Lc.time:case Lc.timestamptz:case Lc.timetz:case Lc.tsrange:case Lc.tstzrange:default:return zc(t)}},zc=e=>e,qc=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Kc=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Hc=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Gc=(e,t)=>{if("string"!=typeof e)return e;const r=e.length-1,n=e[r];if("{"===e[0]&&"}"===n){let n;const s=e.slice(1,r);try{n=JSON.parse("["+s+"]")}catch(o){n=s?s.split(","):[]}return n.map(e=>Wc(t,e))}return e},Vc=e=>"string"==typeof e?e.replace(" ","T"):e,Jc=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Yc{constructor(e,t,r={},n=1e4){this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Xc,Zc,Qc,eu,tu,ru,nu,ou;(Zc=Xc||(Xc={})).SYNC="sync",Zc.JOIN="join",Zc.LEAVE="leave";class su{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.joinRef=this.channel._joinRef(),this.state=su.syncState(this.state,e,t,r),this.pendingDiffs.forEach(e=>{this.state=su.syncDiff(this.state,e,t,r)}),this.pendingDiffs=[],n()}),this.channel._on(r.diff,{},e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=su.syncDiff(this.state,e,t,r),n())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,n){const o=this.cloneDeep(e),s=this.transformState(t),i={},a={};return this.map(o,(e,t)=>{s[e]||(a[e]=t)}),this.map(s,(e,t)=>{const r=o[e];if(r){const n=t.map(e=>e.presence_ref),o=r.map(e=>e.presence_ref),s=t.filter(e=>o.indexOf(e.presence_ref)<0),l=r.filter(e=>n.indexOf(e.presence_ref)<0);s.length>0&&(i[e]=s),l.length>0&&(a[e]=l)}else i[e]=t}),this.syncDiff(o,{joins:i,leaves:a},r,n)}static syncDiff(e,t,r,n){const{joins:o,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(o,(t,n)=>{var o;const s=null!==(o=e[t])&&void 0!==o?o:[];if(e[t]=this.cloneDeep(n),s.length>0){const r=e[t].map(e=>e.presence_ref),n=s.filter(e=>r.indexOf(e.presence_ref)<0);e[t].unshift(...n)}r(t,s,n)}),this.map(s,(t,r)=>{let o=e[t];if(!o)return;const s=r.map(e=>e.presence_ref);o=o.filter(e=>s.indexOf(e.presence_ref)<0),e[t]=o,n(t,o,r),0===o.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const n=e[r];return t[r]="metas"in n?n.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(eu=Qc||(Qc={})).ALL="*",eu.INSERT="INSERT",eu.UPDATE="UPDATE",eu.DELETE="DELETE",(ru=tu||(tu={})).BROADCAST="broadcast",ru.PRESENCE="presence",ru.POSTGRES_CHANGES="postgres_changes",ru.SYSTEM="system",(ou=nu||(nu={})).SUBSCRIBED="SUBSCRIBED",ou.TIMED_OUT="TIMED_OUT",ou.CLOSED="CLOSED",ou.CHANNEL_ERROR="CHANNEL_ERROR";class iu{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Pc.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Yc(this,Rc.join,this.params,this.timeout),this.rejoinTimer=new Uc(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Pc.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Pc.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Pc.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Pc.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Pc.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Rc.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new su(this),this.broadcastEndpointURL=Jc(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,n,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Pc.closed){const{config:{broadcast:s,presence:i,private:a}}=this.params,l=null!==(n=null===(r=this.bindings.postgres_changes)||void 0===r?void 0:r.map(e=>e.filter))&&void 0!==n?n:[],c=!!this.bindings[tu.PRESENCE]&&this.bindings[tu.PRESENCE].length>0||!0===(null===(o=this.params.config.presence)||void 0===o?void 0:o.enabled),u={},d={broadcast:s,presence:Object.assign(Object.assign({},i),{enabled:c}),postgres_changes:l,private:a};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(nu.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(nu.CLOSED)),this.updateJoinPayload(Object.assign({config:d},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var r;if(this.socket.setAuth(),void 0!==t){const n=this.bindings.postgres_changes,o=null!==(r=null==n?void 0:n.length)&&void 0!==r?r:0,s=[];for(let r=0;r<o;r++){const o=n[r],{filter:{event:i,schema:a,table:l,filter:c}}=o,u=t&&t[r];if(!u||u.event!==i||u.schema!==a||u.table!==l||u.filter!==c)return this.unsubscribe(),this.state=Pc.errored,void(null==e||e(nu.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));s.push(Object.assign(Object.assign({},o),{id:u.id}))}return this.bindings.postgres_changes=s,void(e&&e(nu.SUBSCRIBED))}null==e||e(nu.SUBSCRIBED)}).receive("error",t=>{this.state=Pc.errored,null==e||e(nu.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(nu.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===Pc.joined&&e===tu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e,t={}){var r,n;if(this._canPush()||"broadcast"!==e.type)return new Promise(r=>{var n,o,s;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(s=null===(o=null===(n=this.params)||void 0===n?void 0:n.config)||void 0===o?void 0:o.broadcast)||void 0===s?void 0:s.ack)||r("ok"),i.receive("ok",()=>r("ok")),i.receive("error",()=>r("error")),i.receive("timeout",()=>r("timed out"))});{const{event:s,payload:i}=e,a={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,a,null!==(r=t.timeout)&&void 0!==r?r:this.timeout);return await(null===(n=e.body)||void 0===n?void 0:n.cancel()),e.ok?"ok":"error"}catch(o){return"AbortError"===o.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Pc.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Rc.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(n=>{r=new Yc(this,Rc.leave,{},e),r.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{null==r||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Pc.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const n=new AbortController,o=setTimeout(()=>n.abort(),r),s=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(o),s}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Yc(this,e,t,r);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var n,o;const s=e.toLocaleLowerCase(),{close:i,error:a,leave:l,join:c}=Rc;if(r&&[i,a,l,c].indexOf(s)>=0&&r!==this._joinRef())return;let u=this._onMessage(s,t,r);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(n=this.bindings.postgres_changes)||void 0===n||n.filter(e=>{var t,r,n;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(n=null===(r=e.filter)||void 0===r?void 0:r.event)||void 0===n?void 0:n.toLocaleLowerCase())===s}).map(e=>e.callback(u,r)):null===(o=this.bindings[s])||void 0===o||o.filter(e=>{var r,n,o,i,a,l;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in e){const s=e.id,i=null===(r=e.filter)||void 0===r?void 0:r.event;return s&&(null===(n=t.ids)||void 0===n?void 0:n.includes(s))&&("*"===i||(null==i?void 0:i.toLocaleLowerCase())===(null===(o=t.data)||void 0===o?void 0:o.type.toLocaleLowerCase()))}{const r=null===(a=null===(i=null==e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===a?void 0:a.toLocaleLowerCase();return"*"===r||r===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===s}).map(e=>{if("object"==typeof u&&"ids"in u){const e=u.data,{schema:t,table:r,commit_timestamp:n,type:o,errors:s}=e,i={schema:t,table:r,commit_timestamp:n,eventType:o,new:{},old:{},errors:s};u=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(u,r)})}_isClosed(){return this.state===Pc.closed}_isJoined(){return this.state===Pc.joined}_isJoining(){return this.state===Pc.joining}_isLeaving(){return this.state===Pc.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const n=e.toLocaleLowerCase(),o={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(o):this.bindings[n]=[o],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(e=>{var n;return!((null===(n=e.type)||void 0===n?void 0:n.toLocaleLowerCase())===r&&iu.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Rc.close,{},e)}_onError(e){this._on(Rc.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Pc.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=Fc(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=Fc(e.columns,e.old_record)),t}}const au=()=>{},lu=25e3,cu=10,uu=100,du=[1e3,2e3,5e3,1e4];class hu{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=jc,this.transport=null,this.heartbeatIntervalMs=lu,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=au,this.ref=0,this.reconnectTimer=null,this.logger=au,this.conn=null,this.sendBuffer=[],this.serializer=new Mc,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(()=>Gl).then(({default:t})=>t(...e)).catch(e=>{throw new Error(`Failed to load @supabase/node-fetch: ${e.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...e)=>t(...e)},!(null===(r=null==t?void 0:t.params)||void 0===r?void 0:r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Ac.websocket}`,this.httpEndpoint=Jc(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Sc.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Tc.connecting:return Ic.Connecting;case Tc.open:return Ic.Open;case Tc.closing:return Ic.Closing;default:return Ic.Closed}}isConnected(){return this.connectionState()===Ic.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const r=`realtime:${e}`,n=this.getChannels().find(e=>e.topic===r);if(n)return n;{const r=new iu(`realtime:${e}`,t,this);return this.channels.push(r),r}}push(e){const{topic:t,event:r,payload:n,ref:o}=e,s=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${r} (${o})`,n),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},uu)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(a){this.log("error","error in heartbeat callback",a)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:r,payload:n,ref:o}=e,s=o?`(${o})`:"",i=n.status||"";this.log("receive",`${i} ${t} ${r} ${s}`.trim(),n),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,n,o)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Rc.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const r=e.match(/\?/)?"&":"?";return`${e}${r}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;t=e||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const r={access_token:t,version:"realtime-js/2.15.4"};t&&e.updateJoinPayload(r),e.joinedOnce&&e._isJoined()&&e._push(Rc.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(n){this.log("error",`error in ${e} callback`,n)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Uc(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},cu)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,n,o,s,i,a,l,c;if(this.transport=null!==(t=null==e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(r=null==e?void 0:e.timeout)&&void 0!==r?r:jc,this.heartbeatIntervalMs=null!==(n=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==n?n:lu,this.worker=null!==(o=null==e?void 0:e.worker)&&void 0!==o&&o,this.accessToken=null!==(s=null==e?void 0:e.accessToken)&&void 0!==s?s:null,this.heartbeatCallback=null!==(i=null==e?void 0:e.heartbeatCallback)&&void 0!==i?i:au,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(a=null==e?void 0:e.reconnectAfterMs)&&void 0!==a?a:e=>du[e-1]||1e4,this.encode=null!==(l=null==e?void 0:e.encode)&&void 0!==l?l:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(c=null==e?void 0:e.decode)&&void 0!==c?c:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}class fu extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function pu(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class mu extends fu{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class gu extends fu{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var vu=function(e,t,r,n){return new(r||(r=Promise))(function(o,s){function i(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,a)}l((n=n.apply(e,t||[])).next())})};const yu=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(()=>Gl).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},bu=e=>{if(Array.isArray(e))return e.map(e=>bu(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,r])=>{const n=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[n]=bu(r)}),t};var wu=function(e,t,r,n){return new(r||(r=Promise))(function(o,s){function i(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,a)}l((n=n.apply(e,t||[])).next())})};const _u=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),xu=(e,t,r)=>wu(void 0,void 0,void 0,function*(){const n=yield vu(void 0,void 0,void 0,function*(){return"undefined"==typeof Response?(yield Promise.resolve().then(()=>Gl)).Response:Response});e instanceof n&&!(null==r?void 0:r.noResolveJson)?e.json().then(r=>{const n=e.status||500,o=(null==r?void 0:r.statusCode)||n+"";t(new mu(_u(r),n,o))}).catch(e=>{t(new gu(_u(e),e))}):t(new gu(_u(e),e))}),ku=(e,t,r,n)=>{const o={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&n?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(n)?(o.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),o.body=JSON.stringify(n)):o.body=n,(null==t?void 0:t.duplex)&&(o.duplex=t.duplex),Object.assign(Object.assign({},o),r)):o};function Eu(e,t,r,n,o,s){return wu(this,void 0,void 0,function*(){return new Promise((i,a)=>{e(r,ku(t,n,o,s)).then(e=>{if(!e.ok)throw e;return(null==n?void 0:n.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>xu(e,a,n))})})}function Su(e,t,r,n){return wu(this,void 0,void 0,function*(){return Eu(e,"GET",t,r,n)})}function ju(e,t,r,n,o){return wu(this,void 0,void 0,function*(){return Eu(e,"POST",t,n,o,r)})}function Tu(e,t,r,n,o){return wu(this,void 0,void 0,function*(){return Eu(e,"PUT",t,n,o,r)})}function Cu(e,t,r,n,o){return wu(this,void 0,void 0,function*(){return Eu(e,"DELETE",t,n,o,r)})}var Pu=function(e,t,r,n){return new(r||(r=Promise))(function(o,s){function i(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,a)}l((n=n.apply(e,t||[])).next())})};const Ou={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ru={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Nu{constructor(e,t={},r,n){this.url=e,this.headers=t,this.bucketId=r,this.fetch=yu(n)}uploadOrUpdate(e,t,r,n){return Pu(this,void 0,void 0,function*(){try{let o;const s=Object.assign(Object.assign({},Ru),n);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(s.upsert)});const a=s.metadata;"undefined"!=typeof Blob&&r instanceof Blob?(o=new FormData,o.append("cacheControl",s.cacheControl),a&&o.append("metadata",this.encodeMetadata(a)),o.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(o=r,o.append("cacheControl",s.cacheControl),a&&o.append("metadata",this.encodeMetadata(a))):(o=r,i["cache-control"]=`max-age=${s.cacheControl}`,i["content-type"]=s.contentType,a&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(a)))),(null==n?void 0:n.headers)&&(i=Object.assign(Object.assign({},i),n.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield("PUT"==e?Tu:ju)(this.fetch,`${this.url}/object/${c}`,o,Object.assign({headers:i},(null==s?void 0:s.duplex)?{duplex:s.duplex}:{}));return{data:{path:l,id:u.Id,fullPath:u.Key},error:null}}catch(o){if(pu(o))return{data:null,error:o};throw o}})}upload(e,t,r){return Pu(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,n){return Pu(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),s=this._getFinalPath(o),i=new URL(this.url+`/object/upload/sign/${s}`);i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:Ru.upsert},n),s=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&r instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(e=r,e.append("cacheControl",t.cacheControl)):(e=r,s["cache-control"]=`max-age=${t.cacheControl}`,s["content-type"]=t.contentType);return{data:{path:o,fullPath:(yield Tu(this.fetch,i.toString(),e,{headers:s})).Key},error:null}}catch(a){if(pu(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(e,t){return Pu(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const n=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(n["x-upsert"]="true");const o=yield ju(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),s=new URL(this.url+o.url),i=s.searchParams.get("token");if(!i)throw new fu("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:i},error:null}}catch(r){if(pu(r))return{data:null,error:r};throw r}})}update(e,t,r){return Pu(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Pu(this,void 0,void 0,function*(){try{return{data:yield ju(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(pu(n))return{data:null,error:n};throw n}})}copy(e,t,r){return Pu(this,void 0,void 0,function*(){try{return{data:{path:(yield ju(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(pu(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,r){return Pu(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),o=yield ju(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},(null==r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers});const s=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${s}`)},{data:o,error:null}}catch(n){if(pu(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,r){return Pu(this,void 0,void 0,function*(){try{const n=yield ju(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:n.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${o}`):null})),error:null}}catch(n){if(pu(n))return{data:null,error:n};throw n}})}download(e,t){return Pu(this,void 0,void 0,function*(){const r=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",n=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),o=n?`?${n}`:"";try{const t=this._getFinalPath(e),n=yield Su(this.fetch,`${this.url}/${r}/${t}${o}`,{headers:this.headers,noResolveJson:!0});return{data:yield n.blob(),error:null}}catch(s){if(pu(s))return{data:null,error:s};throw s}})}info(e){return Pu(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield Su(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:bu(e),error:null}}catch(r){if(pu(r))return{data:null,error:r};throw r}})}exists(e){return Pu(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,r,n){return wu(this,void 0,void 0,function*(){return Eu(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(pu(r)&&r instanceof gu){const e=r.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],o=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==o&&n.push(o);const s=void 0!==(null==t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==i&&n.push(i);let a=n.join("&");return""!==a&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${r}${a}`)}}}remove(e){return Pu(this,void 0,void 0,function*(){try{return{data:yield Cu(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(pu(t))return{data:null,error:t};throw t}})}list(e,t,r){return Pu(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Ou),t),{prefix:e||""});return{data:yield ju(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(pu(n))return{data:null,error:n};throw n}})}listV2(e,t){return Pu(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield ju(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(pu(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Au={"X-Client-Info":"storage-js/2.11.0"};var Iu=function(e,t,r,n){return new(r||(r=Promise))(function(t,o){function s(e){try{a(n.next(e))}catch(t){o(t)}}function i(e){try{a(n.throw(e))}catch(t){o(t)}}function a(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r(function(e){e(n)})).then(s,i)}a((n=n.apply(e,[])).next())})};class $u{constructor(e,t={},r,n){const o=new URL(e);if(null==n?void 0:n.useNewHostname){/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase."))}this.url=o.href,this.headers=Object.assign(Object.assign({},Au),t),this.fetch=yu(r)}listBuckets(){return Iu(this,0,void 0,function*(){try{return{data:yield Su(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(pu(e))return{data:null,error:e};throw e}})}getBucket(e){return Iu(this,0,void 0,function*(){try{return{data:yield Su(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(pu(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Iu(this,0,void 0,function*(){try{return{data:yield ju(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(pu(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Iu(this,0,void 0,function*(){try{return{data:yield Tu(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(pu(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Iu(this,0,void 0,function*(){try{return{data:yield ju(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(pu(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Iu(this,0,void 0,function*(){try{return{data:yield Cu(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(pu(t))return{data:null,error:t};throw t}})}}class Lu extends $u{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new Nu(this.url,this.headers,e,this.fetch)}}let Du="";Du="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Mu={headers:{"X-Client-Info":`supabase-js-${Du}/2.57.0`}},Uu={schema:"public"},Fu={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Bu={};var Wu=function(e,t,r,n){return new(r||(r=Promise))(function(o,s){function i(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,a)}l((n=n.apply(e,t||[])).next())})};const zu=(e,t,r)=>{const n=(e=>{let t;return t=e||("undefined"==typeof fetch?zl:fetch),(...e)=>t(...e)})(r),o="undefined"==typeof Headers?ql:Headers;return(r,s)=>Wu(void 0,void 0,void 0,function*(){var i;const a=null!==(i=yield t())&&void 0!==i?i:e;let l=new o(null==s?void 0:s.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${a}`),n(r,Object.assign(Object.assign({},s),{headers:l}))})};var qu=function(e,t,r,n){return new(r||(r=Promise))(function(t,o){function s(e){try{a(n.next(e))}catch(t){o(t)}}function i(e){try{a(n.throw(e))}catch(t){o(t)}}function a(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r(function(e){e(n)})).then(s,i)}a((n=n.apply(e,[])).next())})};const Ku="2.71.1",Hu=3e4,Gu=9e4,Vu={"X-Client-Info":`gotrue-js/${Ku}`},Ju="X-Supabase-Api-Version",Yu={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Xu=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Zu extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function Qu(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class ed extends Zu{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class td extends Zu{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class rd extends Zu{constructor(e,t,r,n){super(e,r,n),this.name=t,this.status=r}}class nd extends rd{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class od extends rd{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class sd extends rd{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class id extends rd{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ad extends rd{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ld extends rd{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function cd(e){return Qu(e)&&"AuthRetryableFetchError"===e.name}class ud extends rd{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class dd extends rd{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const hd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),fd=" \t\n\r=".split(""),pd=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<fd.length;t+=1)e[fd[t].charCodeAt(0)]=-2;for(let t=0;t<hd.length;t+=1)e[hd[t].charCodeAt(0)]=t;return e})();function md(e,t,r){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(hd[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(hd[e]),t.queuedBits-=6}}function gd(e,t,r){const n=pd[e];if(!(n>-1)){if(-2===n)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function vd(e){const t=[],r=e=>{t.push(String.fromCodePoint(e))},n={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},s=e=>{!function(e,t,r){if(0===t.utf8seq){if(e<=127)return void r(e);for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}}(e,n,r)};for(let i=0;i<e.length;i+=1)gd(e.charCodeAt(i),o,s);return t.join("")}function yd(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function bd(e){const t=[],r={queue:0,queuedBits:0},n=e=>{t.push(e)};for(let o=0;o<e.length;o+=1)gd(e.charCodeAt(o),r,n);return new Uint8Array(t)}function wd(e){const t=[];return function(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const t=1024*(n-55296)&65535;n=65536+(e.charCodeAt(r+1)-56320&65535|t),r+=1}yd(n,t)}}(e,e=>t.push(e)),new Uint8Array(t)}function _d(e){const t=[],r={queue:0,queuedBits:0},n=e=>{t.push(e)};return e.forEach(e=>md(e,r,n)),md(null,r,n),t.join("")}const xd=()=>"undefined"!=typeof window&&"undefined"!=typeof document,kd={tested:!1,writable:!1},Ed=()=>{if(!xd())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(t){return!1}if(kd.tested)return kd.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),kd.tested=!0,kd.writable=!0}catch(t){kd.tested=!0,kd.writable=!1}return kd.writable};const Sd=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(()=>Gl).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},jd=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Td=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(n){return r}},Cd=async(e,t)=>{await e.removeItem(t)};class Pd{constructor(){this.promise=new Pd.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function Od(e){const t=e.split(".");if(3!==t.length)throw new dd("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Xu.test(t[r]))throw new dd("JWT not in base64url format");return{header:JSON.parse(vd(t[0])),payload:JSON.parse(vd(t[1])),signature:bd(t[2]),raw:{header:t[0],payload:t[1]}}}function Rd(e){return("0"+e.toString(16)).substr(-2)}async function Nd(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(r);return Array.from(n).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ad(e,t,r=!1){const n=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let r="";for(let n=0;n<56;n++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,Rd).join("")}();let o=n;r&&(o+="/PASSWORD_RECOVERY"),await jd(e,`${t}-code-verifier`,o);const s=await Nd(n);return[s,n===s?"plain":"s256"]}Pd.promiseConstructor=Promise;const Id=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const $d=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ld(e){if(!$d.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Dd(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Md(e){return JSON.parse(JSON.stringify(e))}const Ud=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Fd=[502,503,504];async function Bd(e){var t,r;if(!("object"==typeof(r=e)&&null!==r&&"status"in r&&"ok"in r&&"json"in r&&"function"==typeof r.json))throw new ld(Ud(e),0);if(Fd.includes(e.status))throw new ld(Ud(e),e.status);let n,o;try{n=await e.json()}catch(i){throw new td(Ud(i),i)}const s=function(e){const t=e.headers.get(Ju);if(!t)return null;if(!t.match(Id))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(i){return null}}(e);if(s&&s.getTime()>=Yu.timestamp&&"object"==typeof n&&n&&"string"==typeof n.code?o=n.code:"object"==typeof n&&n&&"string"==typeof n.error_code&&(o=n.error_code),o){if("weak_password"===o)throw new ud(Ud(n),e.status,(null===(t=n.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===o)throw new nd}else if("object"==typeof n&&n&&"object"==typeof n.weak_password&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new ud(Ud(n),e.status,n.weak_password.reasons);throw new ed(Ud(n),e.status||500,o)}async function Wd(e,t,r,n){var o;const s=Object.assign({},null==n?void 0:n.headers);s[Ju]||(s[Ju]=Yu.name),(null==n?void 0:n.jwt)&&(s.Authorization=`Bearer ${n.jwt}`);const i=null!==(o=null==n?void 0:n.query)&&void 0!==o?o:{};(null==n?void 0:n.redirectTo)&&(i.redirect_to=n.redirectTo);const a=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await async function(e,t,r,n,o,s){const i=((e,t,r,n)=>{const o={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),o.body=JSON.stringify(n),Object.assign(Object.assign({},o),r))})(t,n,o,s);let a;try{a=await e(r,Object.assign({},i))}catch(l){throw console.error(l),new ld(Ud(l),0)}a.ok||await Bd(a);if(null==n?void 0:n.noResolveJson)return a;try{return await a.json()}catch(l){await Bd(l)}}(e,t,r+a,{headers:s,noResolveJson:null==n?void 0:n.noResolveJson},{},null==n?void 0:n.body);return(null==n?void 0:n.xform)?null==n?void 0:n.xform(l):{data:Object.assign({},l),error:null}}function zd(e){var t;let r=null;var n;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=(n=e.expires_in,Math.round(Date.now()/1e3)+n)));return{data:{session:r,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function qd(e){const t=zd(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function Kd(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Hd(e){return{data:e,error:null}}function Gd(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:o,verification_type:s}=e,i=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:r,hashed_token:n,redirect_to:o,verification_type:s},user:Object.assign({},i)},error:null}}function Vd(e){return e}const Jd=["global","local","others"];class Yd{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Sd(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=Jd[0]){if(Jd.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Jd.join(", ")}`);try{return await Wd(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Qu(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Wd(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Kd})}catch(r){if(Qu(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["options"]),n=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(n.new_email=null==r?void 0:r.newEmail,delete n.newEmail),await Wd(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Gd,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(Qu(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Wd(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Kd})}catch(t){if(Qu(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,n,o,s,i,a;try{const l={nextPage:null,lastPage:0,total:0},c=await Wd(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(o=null===(n=null==e?void 0:e.perPage)||void 0===n?void 0:n.toString())&&void 0!==o?o:""},xform:Vd});if(c.error)throw c.error;const u=await c.json(),d=null!==(s=c.headers.get("x-total-count"))&&void 0!==s?s:0,h=null!==(a=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==a?a:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(Qu(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){Ld(e);try{return await Wd(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Kd})}catch(t){if(Qu(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Ld(e);try{return await Wd(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Kd})}catch(r){if(Qu(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Ld(e);try{return await Wd(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Kd})}catch(r){if(Qu(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Ld(e.userId);try{const{data:t,error:r}=await Wd(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(t){if(Qu(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Ld(e.userId),Ld(e.id);try{return{data:await Wd(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Qu(t))return{data:null,error:t};throw t}}}function Xd(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Zd=!!(globalThis&&Ed()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Qd extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class eh extends Qd{}async function th(e,t,r){Zd&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Zd&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async n=>{if(!n){if(0===t)throw Zd&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new eh(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Zd)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}Zd&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await r()}finally{Zd&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}))}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const rh={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Vu,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function nh(e,t,r){return await r()}const oh={};class sh{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=sh.nextInstanceID,sh.nextInstanceID+=1,this.instanceID>0&&xd()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},rh),e);if(this.logDebugMessages=!!n.debug,"function"==typeof n.debug&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Yd({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Sd(n.fetch),this.lock=n.lock||nh,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:xd()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=th:this.lock=nh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:Ed()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Xd(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=Xd(this.memoryStorage)),xd()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}null===(r=this.broadcastChannel)||void 0===r||r.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=oh[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){oh[this.storageKey]=Object.assign(Object.assign({},oh[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=oh[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){oh[this.storageKey]=Object.assign(Object.assign({},oh[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Ku}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((e,r)=>{t[r]=e})}catch(n){}return r.searchParams.forEach((e,r)=>{t[r]=e}),t}(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),xd()&&this.detectSessionInUrl&&"none"!==r){const{data:n,error:o}=await this._getSessionFromURL(t,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),function(e){return Qu(e)&&"AuthImplicitGrantRedirectError"===e.name}(o)){const t=null===(e=o.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:o}}return await this._removeSession(),{error:o}}const{session:s,redirectType:i}=n;return this._debug("#_initialize()","detected session in URL",s,"redirect type",i),await this._saveSession(s),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Qu(t)?{error:t}:{error:new td("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,n;try{const o=await Wd(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(r=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.captchaToken}},xform:zd}),{data:s,error:i}=o;if(i||!s)return{data:{user:null,session:null},error:i};const a=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(o){if(Qu(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var t,r,n;try{let o;if("email"in e){const{email:r,password:n,options:s}=e;let i=null,a=null;"pkce"===this.flowType&&([i,a]=await Ad(this.storage,this.storageKey)),o=await Wd(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==s?void 0:s.emailRedirectTo,body:{email:r,password:n,data:null!==(t=null==s?void 0:s.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},code_challenge:i,code_challenge_method:a},xform:zd})}else{if(!("phone"in e))throw new sd("You must provide either an email or phone number and a password");{const{phone:t,password:s,options:i}=e;o=await Wd(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:s,data:null!==(r=null==i?void 0:i.data)&&void 0!==r?r:{},channel:null!==(n=null==i?void 0:i.channel)&&void 0!==n?n:"sms",gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:zd})}}const{data:s,error:i}=o;if(i||!s)return{data:{user:null,session:null},error:i};const a=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(o){if(Qu(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:n,options:o}=e;t=await Wd(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:n,gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken}},xform:qd})}else{if(!("phone"in e))throw new sd("You must provide either an email or phone number and a password");{const{phone:r,password:n,options:o}=e;t=await Wd(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:n,gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken}},xform:qd})}}const{data:r,error:n}=t;return n?{data:{user:null,session:null},error:n}:r&&r.session&&r.user?(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n}):{data:{user:null,session:null},error:new od}}catch(t){if(Qu(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,n,o;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:null===(o=e.options)||void 0===o?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,n,o,s,i,a,l,c,u,d,h;let f,p;if("message"in e)f=e.message,p=e.signature;else{const{chain:d,wallet:h,statement:m,options:g}=e;let v;if(xd())if("object"==typeof h)v=h;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");v=e.solana}else{if("object"!=typeof h||!(null==g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=h}const y=new URL(null!==(t=null==g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in v&&v.signIn){const e=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==g?void 0:g.signInWithSolana),{version:"1",domain:y.host,uri:y.href}),m?{statement:m}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");f="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in v&&"function"==typeof v.signMessage&&"publicKey"in v&&"object"==typeof v&&v.publicKey&&"toBase58"in v.publicKey&&"function"==typeof v.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=[`${y.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${y.href}`,`Issued At: ${null!==(n=null===(r=null==g?void 0:g.signInWithSolana)||void 0===r?void 0:r.issuedAt)&&void 0!==n?n:(new Date).toISOString()}`,...(null===(o=null==g?void 0:g.signInWithSolana)||void 0===o?void 0:o.notBefore)?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...(null===(s=null==g?void 0:g.signInWithSolana)||void 0===s?void 0:s.expirationTime)?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...(null===(i=null==g?void 0:g.signInWithSolana)||void 0===i?void 0:i.chainId)?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...(null===(a=null==g?void 0:g.signInWithSolana)||void 0===a?void 0:a.nonce)?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...(null===(l=null==g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...(null===(u=null===(c=null==g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===u?void 0:u.length)?["Resources",...g.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await v.signMessage((new TextEncoder).encode(f),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:r}=await Wd(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:_d(p)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:zd});if(r)throw r;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:r}):{data:{user:null,session:null},error:new od}}catch(m){if(Qu(m))return{data:{user:null,session:null},error:m};throw m}}async _exchangeCodeForSession(e){const t=await Td(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(null!=t?t:"").split("/");try{const{data:t,error:o}=await Wd(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:zd});if(await Cd(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=n?n:null}),error:o}):{data:{user:null,session:null,redirectType:null},error:new od}}catch(o){if(Qu(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:t,provider:r,token:n,access_token:o,nonce:s}=e,i=await Wd(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:o,nonce:s,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:zd}),{data:a,error:l}=i;return l?{data:{user:null,session:null},error:l}:a&&a.session&&a.user?(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:l}):{data:{user:null,session:null},error:new od}}catch(t){if(Qu(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,n,o,s;try{if("email"in e){const{email:n,options:o}=e;let s=null,i=null;"pkce"===this.flowType&&([s,i]=await Ad(this.storage,this.storageKey));const{error:a}=await Wd(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:n,data:null!==(t=null==o?void 0:o.data)&&void 0!==t?t:{},create_user:null===(r=null==o?void 0:o.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken},code_challenge:s,code_challenge_method:i},redirectTo:null==o?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:t,options:r}=e,{data:i,error:a}=await Wd(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(n=null==r?void 0:r.data)&&void 0!==n?n:{},create_user:null===(o=null==r?void 0:r.shouldCreateUser)||void 0===o||o,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},channel:null!==(s=null==r?void 0:r.channel)&&void 0!==s?s:"sms"}});return{data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:a}}throw new sd("You must provide either an email or phone number.")}catch(i){if(Qu(i))return{data:{user:null,session:null},error:i};throw i}}async verifyOtp(e){var t,r;try{let n,o;"options"in e&&(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo,o=null===(r=e.options)||void 0===r?void 0:r.captchaToken);const{data:s,error:i}=await Wd(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:n,xform:zd});if(i)throw i;if(!s)throw new Error("An error occurred on token verification.");const a=s.session,l=s.user;return(null==a?void 0:a.access_token)&&(await this._saveSession(a),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(n){if(Qu(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,r,n;try{let o=null,s=null;return"pkce"===this.flowType&&([o,s]=await Ad(this.storage,this.storageKey)),await Wd(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==r?r:void 0}),(null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:s}),headers:this.headers,xform:Hd})}catch(o){if(Qu(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new nd;const{error:n}=await Wd(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(Qu(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:o}=e,{error:s}=await Wd(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken}},redirectTo:null==o?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:s}}if("phone"in e){const{phone:r,type:n,options:o}=e,{data:s,error:i}=await Wd(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:null==s?void 0:s.message_id},error:i}}throw new sd("You must provide either an email or phone number and a type")}catch(t){if(Qu(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(e){}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Td(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=!!e.expires_at&&1e3*e.expires_at-Date.now()<Gu;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const t=await Td(this.userStorage,this.storageKey+"-user");(null==t?void 0:t.user)?e.user=t.user:e.user=Dd()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,r,n)=>(t||"user"!==r||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,r,n))})}return{data:{session:e},error:null}}const{session:n,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await Wd(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Kd}):await this._useSession(async e=>{var t,r,n;const{data:o,error:s}=e;if(s)throw s;return(null===(t=o.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Wd(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(n=null===(r=o.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0,xform:Kd}):{data:{user:null},error:new nd}})}catch(t){if(Qu(t))return function(e){return Qu(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await Cd(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:n,error:o}=r;if(o)throw o;if(!n.session)throw new nd;const s=n.session;let i=null,a=null;"pkce"===this.flowType&&null!=e.email&&([i,a]=await Ad(this.storage,this.storageKey));const{data:l,error:c}=await Wd(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:a}),jwt:s.access_token,xform:Kd});if(c)throw c;return s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(r){if(Qu(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new nd;const t=Date.now()/1e3;let r=t,n=!0,o=null;const{payload:s}=Od(e.access_token);if(s.exp&&(r=s.exp,n=r<=t),n){const{session:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return{data:{user:null,session:null},error:r};if(!t)return{data:{user:null,session:null},error:null};o=t}else{const{data:n,error:s}=await this._getUser(e.access_token);if(s)throw s;o={access_token:e.access_token,refresh_token:e.refresh_token,user:n.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(t){if(Qu(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:n,error:o}=t;if(o)throw o;e=null!==(r=n.session)&&void 0!==r?r:void 0}if(!(null==e?void 0:e.refresh_token))throw new nd;const{session:n,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Qu(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!xd())throw new id("No browser detected.");if(e.error||e.error_description||e.error_code)throw new id(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new ad("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new id("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ad("No code detected.");const{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;const n=new URL(window.location.href);return n.searchParams.delete("code"),window.history.replaceState(window.history.state,"",n.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:o,refresh_token:s,expires_in:i,expires_at:a,token_type:l}=e;if(!(o&&i&&s&&l))throw new id("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(i);let d=c+u;a&&(d=parseInt(a));const h=d-c;1e3*h<=Hu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${u}s`);const f=d-u;c-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,d,c):c-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,d,c);const{data:p,error:m}=await this._getUser(o);if(m)throw m;const g={provider_token:r,provider_refresh_token:n,access_token:o,expires_in:u,expires_at:d,refresh_token:s,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(r){if(Qu(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Td(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:n,error:o}=t;if(o)return{error:o};const s=null===(r=n.session)||void 0===r?void 0:r.access_token;if(s){const{error:t}=await this.admin.signOut(s,e);if(t&&(!function(e){return Qu(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await Cd(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,n;try{const{data:{session:n},error:o}=t;if(o)throw o;await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(vh){await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",vh),console.error(vh)}})}async resetPasswordForEmail(e,t={}){let r=null,n=null;"pkce"===this.flowType&&([r,n]=await Ad(this.storage,this.storageKey,!0));try{return await Wd(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(Qu(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(Qu(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:n}=await this._useSession(async t=>{var r,n,o,s,i;const{data:a,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(r=e.options)||void 0===r?void 0:r.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(o=e.options)||void 0===o?void 0:o.queryParams,skipBrowserRedirect:!0});return await Wd(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(s=a.session)||void 0===s?void 0:s.access_token)&&void 0!==i?i:void 0})});if(n)throw n;return xd()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==r?void 0:r.url),{data:{provider:e.provider,url:null==r?void 0:r.url},error:null}}catch(r){if(Qu(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,n;const{data:o,error:s}=t;if(s)throw s;return await Wd(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(n=null===(r=o.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0})})}catch(t){if(Qu(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const o=Date.now();return await(r=async r=>(r>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await Wd(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:zd})),n=(e,t)=>{const r=200*Math.pow(2,e);return t&&cd(t)&&Date.now()+r-o<Hu},new Promise((e,t)=>{(async()=>{for(let s=0;s<1/0;s++)try{const t=await r(s);if(!n(s,null,t))return void e(t)}catch(o){if(!n(s,o))return void t(o)}})()}))}catch(o){if(this._debug(t,"error",o),Qu(o))return{data:{session:null,user:null},error:o};throw o}finally{this._debug(t,"end")}var r,n}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),xd()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const o=await Td(this.storage,this.storageKey);if(o&&this.userStorage){let t=await Td(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:o.user},await jd(this.userStorage,this.storageKey+"-user",t)),o.user=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:Dd()}else if(o&&!o.user&&!o.user){const e=await Td(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(o.user=e.user,await Cd(this.storage,this.storageKey+"-user"),await jd(this.storage,this.storageKey,o)):o.user=Dd()}if(this._debug(r,"session from storage",o),!this._isValidSession(o))return this._debug(r,"session is not valid"),void(null!==o&&await this._removeSession());const s=1e3*(null!==(t=o.expires_at)&&void 0!==t?t:1/0)-Date.now()<Gu;if(this._debug(r,`session has${s?"":" not"} expired with margin of 90000s`),s){if(this.autoRefreshToken&&o.refresh_token){const{error:e}=await this._callRefreshToken(o.refresh_token);e&&(console.error(e),cd(e)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(o.user&&!0===o.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(o.access_token);!t&&(null==e?void 0:e.user)?(o.user=e.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(n){console.error("Error getting user data:",n),this._debug(r,"error getting user data, skipping SIGNED_IN notification",n)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(vh){return this._debug(r,"error",vh),void console.error(vh)}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new nd;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Pd;const{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new nd;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const n={session:t.session,error:null};return this.refreshingDeferred.resolve(n),n}catch(o){if(this._debug(n,"error",o),Qu(o)){const e={session:null,error:o};return cd(o)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(r=this.refreshingDeferred)||void 0===r||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,r=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const n=[],o=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,t)}catch(o){n.push(o)}});if(await Promise.all(o),n.length>0){for(let e=0;e<n.length;e+=1)console.error(n[e]);throw n[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!r&&t.user&&await jd(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const n=Md(e);await jd(this.storage,this.storageKey,n)}else{const e=Md(t);await jd(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await Cd(this.storage,this.storageKey),await Cd(this.storage,this.storageKey+"-code-verifier"),await Cd(this.storage,this.storageKey+"-user"),this.userStorage&&await Cd(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&xd()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Hu);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:r}}=e;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const n=Math.floor((1e3*r.expires_at-t)/Hu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),n<=3&&await this._callRefreshToken(r.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof Qd))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!xd()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const n=[`provider=${encodeURIComponent(t)}`];if((null==r?void 0:r.redirectTo)&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),(null==r?void 0:r.scopes)&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),"pkce"===this.flowType){const[e,t]=await Ad(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});n.push(r.toString())}if(null==r?void 0:r.queryParams){const e=new URLSearchParams(r.queryParams);n.push(e.toString())}return(null==r?void 0:r.skipBrowserRedirect)&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:n,error:o}=t;return o?{data:null,error:o}:await Wd(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token})})}catch(t){if(Qu(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,n;const{data:o,error:s}=t;if(s)return{data:null,error:s};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:a,error:l}=await Wd(this.fetch,"POST",`${this.url}/factors`,{body:i,headers:this.headers,jwt:null===(r=null==o?void 0:o.session)||void 0===r?void 0:r.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(n=null==a?void 0:a.totp)||void 0===n?void 0:n.qr_code)&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(t){if(Qu(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:o}=t;if(o)return{data:null,error:o};const{data:s,error:i}=await Wd(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token});return i?{data:null,error:i}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:i})})}catch(t){if(Qu(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:o}=t;return o?{data:null,error:o}:await Wd(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token})})}catch(t){if(Qu(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(null==e?void 0:e.factors)||[],n=r.filter(e=>"totp"===e.factor_type&&"verified"===e.status),o=r.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:r,totp:n,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:n},error:o}=e;if(o)return{data:null,error:o};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=Od(n.access_token);let i=null;s.aal&&(i=s.aal);let a=i;(null!==(r=null===(t=n.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==r?r:[]).length>0&&(a="aal2");return{data:{currentLevel:i,nextLevel:a,currentAuthenticationMethods:s.amr||[]},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(t=>t.kid===e);if(r)return r;const n=Date.now();if(r=this.jwks.keys.find(t=>t.kid===e),r&&this.jwks_cached_at+6e5>n)return r;const{data:o,error:s}=await Wd(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return o.keys&&0!==o.keys.length?(this.jwks=o,this.jwks_cached_at=n,r=o.keys.find(t=>t.kid===e),r||null):null}async getClaims(e,t={}){try{let r=e;if(!r){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};r=e.session.access_token}const{header:n,payload:o,signature:s,raw:{header:i,payload:a}}=Od(r);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(o.exp);const l=n.alg&&!n.alg.startsWith("HS")&&n.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(n.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(r);if(e)throw e;return{data:{claims:o,header:n,signature:s},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(n.alg),u=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!(await crypto.subtle.verify(c,u,s,wd(`${i}.${a}`))))throw new dd("Invalid JWT signature");return{data:{claims:o,header:n,signature:s},error:null}}catch(r){if(Qu(r))return{data:null,error:r};throw r}}}sh.nextInstanceID=0;const ih=sh;class ah extends ih{constructor(e){super(e)}}var lh=function(e,t,r,n){return new(r||(r=Promise))(function(t,o){function s(e){try{a(n.next(e))}catch(t){o(t)}}function i(e){try{a(n.throw(e))}catch(t){o(t)}}function a(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r(function(e){e(n)})).then(s,i)}a((n=n.apply(e,[])).next())})};class ch{constructor(e,t,r){var n,o,s;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const i=(a=e).endsWith("/")?a:a+"/";var a;const l=new URL(i);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u=function(e,t){var r,n;const{db:o,auth:s,realtime:i,global:a}=e,{db:l,auth:c,realtime:u,global:d}=t,h={db:Object.assign(Object.assign({},l),o),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},u),i),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},null!==(r=null==d?void 0:d.headers)&&void 0!==r?r:{}),null!==(n=null==a?void 0:a.headers)&&void 0!==n?n:{})}),accessToken:()=>qu(this,0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!=r?r:{},{db:Uu,realtime:Bu,auth:Object.assign(Object.assign({},Fu),{storageKey:c}),global:Mu});this.storageKey=null!==(n=u.auth.storageKey)&&void 0!==n?n:"",this.headers=null!==(o=u.global.headers)&&void 0!==o?o:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(s=u.auth)&&void 0!==s?s:{},this.headers,u.global.fetch),this.fetch=zu(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new bc(new URL("rest/v1",l).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new Lu(this.storageUrl.href,this.headers,this.fetch,null==r?void 0:r.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new Il(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return lh(this,0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return null!==(t=null===(e=r.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:o,storageKey:s,flowType:i,lock:a,debug:l},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ah({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),c),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:o,flowType:i,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new hu(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===r?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=r}}(function(){if("undefined"!=typeof window)return!1;if("undefined"==typeof process)return!1;const e=process.version;if(null==e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const uh=function(){if(window.__SUPABASE_CLIENT__)return window.__SUPABASE_CLIENT__;const e=window.__YURSERVICE_SUPABASE_URL__,t=window.__YURSERVICE_SUPABASE_ANON_KEY__;if(!e||!t)throw new Error("Missing env variables. Please check your .env file.");return((e,t,r)=>new ch(e,t,r))(e,t)}();function dh(){const[e,r]=t.useState([]),[n,o]=t.useState([]),[s,i]=t.useState(!0),[a,l]=t.useState(null);return t.useEffect(()=>{!async function(){try{i(!0),l(null);const[e,t]=await Promise.all([uh.from("app_yurservice_list").select("\n              *,\n              region:list_region(*)\n            ").order("order",{ascending:!1,nullsFirst:!1}).order("title",{ascending:!0}),uh.from("list_region").select("*").order("name",{ascending:!0})]);if(e.error)throw new Error(e.error.message);if(t.error)throw new Error(t.error.message);r(e.data||[]),o(t.data||[])}catch(vh){l(vh instanceof Error?vh.message:"Failed to fetch data")}finally{i(!1)}}()},[]),{resources:e,regions:n,isLoading:s,error:a}}function hh(e){try{if("string"==typeof e){return JSON.parse(e)}return e}catch(t){return null}}function fh(e){var t,r;const n=[];[e.block1,e.block2,e.block3,e.block4,e.block5,e.block6,e.block7,e.block8,e.block9,e.block10].forEach(e=>{const t=hh(e);t&&t.title&&t.link&&n.push({label:t.title,url:t.link,type:"service"})});const o=e.phone||e.email||e.address||e.worktime?{phone:e.phone||void 0,email:(null==(t=e.email)?void 0:t[0])||void 0,address:e.address||void 0,hours:e.worktime||void 0}:void 0,s=hh(e.block_top),i=(null==s?void 0:s.link)||e.website_url||e.services_url||(null==(r=n[0])?void 0:r.url)||"#";return{id:e.id,name:e.title,description:e.about||"",mainUrl:i,mainButtonLabel:(null==s?void 0:s.title)||"Открыть",imageUrl:e.image_url||void 0,websiteUrl:e.website_url||void 0,servicesUrl:e.services_url||void 0,slug:e.slug||void 0,links:n,contacts:o,type:e.type,region_id:e.region_id}}const ph=Te("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),mh=o.forwardRef(({className:e,variant:t,...r},n)=>v.jsx("div",{ref:n,role:"alert",className:de(ph({variant:t}),e),...r}));mh.displayName="Alert";o.forwardRef(({className:e,...t},r)=>v.jsx("h5",{ref:r,className:de("mb-1 font-medium leading-none tracking-tight",e),...t})).displayName="AlertTitle";const gh=o.forwardRef(({className:e,...t},r)=>v.jsx("div",{ref:r,className:de("text-sm [&_p]:leading-relaxed",e),...t}));gh.displayName="AlertDescription";e.RegionSelect=jl,e.ResourceCard=Et,e.YurServicePage=function(){const[e,r]=t.useState(""),[n,o]=t.useState("all"),[s,i]=t.useState(null),[a,l]=t.useState(1),[c,u]=t.useState(1),[d,h]=t.useState(1),{resources:f,regions:p,isLoading:m,error:g}=dh(),y=t.useMemo(()=>f.filter(t=>""===e||t.title.toLowerCase().includes(e.toLowerCase())||t.about&&t.about.toLowerCase().includes(e.toLowerCase())),[e,f]),b=t.useMemo(()=>y.filter(e=>{if("court"!==e.type)return!1;return"all"===n||null!==e.region_id&&e.region_id.toString()===n}),[y,n]),w=t.useMemo(()=>y.filter(e=>"gov"===e.type),[y]),_=t.useMemo(()=>y.filter(e=>"tool"===e.type),[y]),x=b.slice(0,18*a),k=w.slice(0,18*c),E=_.slice(0,18*d),S=b.length>x.length,j=w.length>k.length,T=_.length>E.length;return g?v.jsx("div",{className:"max-w-7xl mx-auto space-y-6",children:v.jsxs(mh,{variant:"destructive",children:[v.jsx(Me,{className:"h-4 w-4"}),v.jsxs(gh,{children:["Failed to load resources: ",g]})]})}):v.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[v.jsxs("div",{children:[v.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Юр сервисы"}),v.jsx("p",{className:"text-muted-foreground",children:"Каталог сервисов для юристов"})]}),v.jsxs(fe,{className:"p-4",children:[v.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[v.jsxs("div",{className:"relative flex-1",children:[v.jsx(Ge,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),v.jsx(he,{placeholder:"Поиск...",value:e,onChange:e=>r(e.target.value),className:"pl-9",disabled:m})]}),v.jsx("div",{className:"flex gap-2",children:v.jsx(jl,{regions:p,selectedRegionId:n,onRegionChange:o,disabled:m})})]}),v.jsx("div",{className:"mt-3 text-sm text-muted-foreground",children:m?"Поиск...":v.jsxs(v.Fragment,{children:["Показано ",y.length," из ",f.length," сервисов","all"!==n&&" (region filter applies to Courts only)"]})})]}),m?v.jsx(fe,{className:"p-12 text-center",children:v.jsx("p",{className:"text-muted-foreground",children:"Загрузка..."})}):0===y.length?v.jsx(fe,{className:"p-12 text-center",children:v.jsx("p",{className:"text-muted-foreground",children:"Не найдено"})}):v.jsxs("div",{className:"space-y-8",children:[b.length>0&&v.jsxs("section",{children:[v.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Суды"}),v.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:x.map(e=>{const t=fh(e),r=`court-${e.id}`;return v.jsx(Et,{resource:t,isExpanded:s===r,onToggle:()=>i(s===r?null:r)},e.id)})}),S&&v.jsx("div",{className:"flex justify-center mt-4",children:v.jsx(Pe,{variant:"outline",onClick:()=>l(e=>e+1),children:"Загрузить еще"})})]}),w.length>0&&v.jsxs("section",{children:[v.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Ведомства"}),v.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:k.map(e=>{const t=fh(e),r=`gov-${e.id}`;return v.jsx(Et,{resource:t,isExpanded:s===r,onToggle:()=>i(s===r?null:r)},e.id)})}),j&&v.jsx("div",{className:"flex justify-center mt-4",children:v.jsx(Pe,{variant:"outline",onClick:()=>u(e=>e+1),children:"Загрузить еще"})})]}),_.length>0&&v.jsxs("section",{children:[v.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Инструменты"}),v.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:E.map(e=>{const t=fh(e),r=`tool-${e.id}`;return v.jsx(Et,{resource:t,isExpanded:s===r,onToggle:()=>i(s===r?null:r)},e.id)})}),T&&v.jsx("div",{className:"flex justify-center mt-4",children:v.jsx(Pe,{variant:"outline",onClick:()=>h(e=>e+1),children:"Загрузить еще"})})]})]})]})},e.mapDatabaseResourceToUI=fh,e.useYurServiceData=dh,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});
